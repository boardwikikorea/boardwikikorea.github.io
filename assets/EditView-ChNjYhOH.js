import{d as D,c as u,f as R,a as e,t as o,z as j,o as i,S as re,g as b,T as ie,i as G,n as C,U as ue,V as me,v as ce,W as ve,e as w,F as T,b as O,y as pe,X as fe,w as q,P as h,Y as xe,Z as be,r as H,$ as _e,p as le,_ as he,D as P,a0 as ke,M as ne,s as l,N as ge,R as $,B as F,Q as ye,a1 as ae,H as $e,I as we,J as Ve,a2 as W}from"./index-ublk6XVv.js";import{u as Ee}from"./event-kShxgt0S.js";import{E as Ce,R as Ue}from"./eventOptions-BJXj2i_H.js";const Se={class:"flex items-center gap-3"},Re={key:0,class:"text-sm text-neutral-700 dark:text-neutral-300"},Be=["disabled"],X=D({__name:"ToggleSwitch",props:{modelValue:{type:Boolean},label:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:r}){const t=a,v=r;function _(){t.disabled||v("update:modelValue",!t.modelValue)}return(d,n)=>(i(),u("div",Se,[a.label?(i(),u("span",Re,o(a.label),1)):R("",!0),e("button",{type:"button",onClick:_,disabled:a.disabled,class:j(["relative w-14 h-7 rounded-full flex items-center transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",a.modelValue?"bg-neutral-900 dark:bg-white":"bg-neutral-300 dark:bg-neutral-700"])},[e("span",{class:j(["absolute w-6 h-6 rounded-full shadow-md transition-all duration-300",a.modelValue?"translate-x-7 bg-white dark:bg-neutral-900":"translate-x-1 bg-white"])},null,2)],10,Be)]))}}),J=re(new Set);function De(){return{registerCloser:v=>{J.add(v)},unregisterCloser:v=>{J.delete(v)},closeAllDropdowns:()=>{J.forEach(v=>{v()})}}}const Me=["disabled"],Te={class:"font-bold text-blue-600 dark:text-blue-400"},Oe={class:"ml-0.5 text-neutral-500"},Le={class:"list-none m-0 p-0 divide-y divide-neutral-100 dark:divide-neutral-700"},Ne=["onClick"],Ie={class:"px-3 py-2.5 text-sm w-full block truncate"},Pe={class:"font-bold text-blue-600 dark:text-blue-400"},ze={class:"ml-0.5 text-neutral-500"},je=D({__name:"BaseSelectBox",props:{modelValue:{default:null},options:{default:()=>[]},label:{default:""},name:{},placeholder:{default:""},disabled:{type:Boolean,default:!1},labelShow:{type:Boolean,default:!0},selectId:{default:null},isFixed:{type:Boolean,default:!1},type:{default:"default"}},emits:["update:modelValue","blur","toggle","change"],setup(a,{expose:r,emit:t}){const v=a,_=t,{registerCloser:d,unregisterCloser:n}=De(),s=b(v.modelValue),m=b(!1),f=b(!1),E=b(null),g=b(null),V=b(null),k=b(!1);ie(E,()=>{f.value=!1}),G(()=>v.modelValue,y=>{s.value=y}),G(f,y=>{y&&le(()=>{const S=g.value,N=V.value;S&&(N&&s.value!==null&&s.value!==""?N.scrollIntoView({block:"nearest",behavior:"smooth"}):S.scrollTop=0)})}),G(s,y=>{_("update:modelValue",y)});const L=C(()=>s.value===null||s.value===""?null:v.options.find(y=>String(y.value)===String(s.value))||null),U=C(()=>L.value?L.value.label:v.placeholder),c=b({}),p=()=>{if(!E.value||!g.value)return;const y=E.value.getBoundingClientRect(),S=window.innerHeight,N=g.value.offsetHeight,A=5,B=10,Y=10,M=window.scrollY||window.pageYOffset,oe=window.scrollX||window.pageXOffset;let I,ee;const se=S-y.bottom;if(m.value=se<N+A,ee=y.left+oe,m.value)I=y.top+M-N-A,I<M+B&&(I=M+B);else{I=y.bottom+M+A;const de=I+N,te=M+S;de>te-Y&&(I=te-N-Y,I<y.top+M&&(I=y.top+M))}c.value={position:"absolute",top:`${I}px`,left:`${ee}px`,width:`${y.width}px`,zIndex:"9999"},k.value=!0},K=()=>{f.value=!f.value,f.value&&(k.value=!1,le(()=>{p()}))};function x(){f.value&&(f.value=!1,n(x))}G(f,y=>{y&&d(x)});const z=y=>{const S=y===null?null:y;s.value!==S&&(s.value=S),_("change",s.value),x()};return ue(()=>{n(x)}),r({closeDropdown:x}),(y,S)=>{var A;const N=pe("font-awesome-icon");return i(),u("div",{class:j(["w-full flex flex-col gap-2 relative",{"opacity-100 pointer-events-none":a.disabled}])},[a.labelShow?(i(),u("label",{key:0,class:j(["text-sm font-medium text-neutral-800 dark:text-neutral-200",[!a.labelShow&&"sr-only"]])},o(a.label),3)):R("",!0),e("div",{class:"relative w-full",ref_key:"controlWrapperRef",ref:E,onClick:S[1]||(S[1]=me(()=>{},["stop"]))},[e("button",{disabled:a.disabled,onClick:K,onKeydown:ve(K,["enter"]),onBlur:S[0]||(S[0]=B=>y.$emit("blur")),class:j(["relative w-full h-[44px] px-2.5 pr-[35px] border border-neutral-300 rounded-md text-sm text-left cursor-pointer bg-white transition-all overflow-hidden text-ellipsis whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-blue-400/40 dark:bg-neutral-800 dark:border-neutral-600 dark:text-neutral-100",[s.value!==null?"text-neutral-900 dark:text-neutral-100 font-medium":"text-neutral-400 dark:text-neutral-500",a.disabled&&"bg-neutral-50 dark:bg-neutral-900/50 cursor-not-allowed text-neutral-400 dark:text-neutral-600"]]),type:"button"},[a.type==="unit"&&s.value!==null&&s.value!==""?(i(),u(T,{key:0},[e("span",Te,o(U.value),1),e("span",Oe,o((A=L.value)==null?void 0:A.unit),1)],64)):(i(),u(T,{key:1},[O(o(U.value),1)],64)),w(N,{icon:f.value?"fas fa-chevron-up":"fas fa-chevron-down",class:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 pointer-events-none"},null,8,["icon"])],42,Me),(i(),ce(_e,{to:"#dropdown-portal"},[w(fe,{name:"dropdown",onBeforeEnter:p,onAfterEnter:p},{default:q(()=>[h(e("div",{ref_key:"dropdownRef",ref:g,class:j(["fixed mt-1 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-lg overflow-y-auto max-h-[240px] z-[2000] transition-opacity duration-200",[m.value?"origin-bottom":"origin-top",!k.value&&"opacity-0"]]),style:be({...c.value,visibility:k.value?"visible":"hidden"})},[e("ul",Le,[(i(!0),u(T,null,H(a.options,(B,Y)=>(i(),u("li",{key:B.value||Y,class:j(["flex items-center w-full cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors",[String(B.value)===String(s.value)?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-medium":"text-neutral-700 dark:text-neutral-300"]]),onClick:M=>z(B.value),ref_for:!0,ref:M=>{String(B.value)===String(s.value)&&(V.value=M)}},[e("span",Ie,[a.type==="unit"?(i(),u(T,{key:0},[e("span",Pe,o(B.label),1),e("span",ze,o(B.unit),1)],64)):(i(),u(T,{key:1},[O(o(B.label),1)],64))])],10,Ne))),128))])],6),[[xe,f.value]])]),_:1})]))],512)],2)}}}),Z=he(je,[["__scopeId","data-v-52a42b46"]]),Ae={class:"space-y-6 md:space-y-6 p-4 md:p-0 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 md:border-0 md:bg-transparent"},qe={key:0,class:"text-xs text-red-500"},He={class:"text-xs text-red-400 flex items-start gap-1"},Ge={class:"space-y-2"},Xe={class:"text-sm font-medium text-neutral-800 dark:text-neutral-200"},Fe={key:0,class:"pl-2 text-neutral-500"},Ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ye=["placeholder"],We=["placeholder"],Je=D({__name:"EventBasicSection",props:{form:{},nameEnError:{}},setup(a){const{t:r,locale:t}=P(),v=a,_=C(()=>Ce.map(n=>({...n,label:r(n.label)}))),d=C(()=>{if(!v.form.country_code)return"";const n=ke(v.form.country_code,t.value);return`${v.form.country_code} ${n}`});return(n,s)=>(i(),u("section",Ae,[w(ne,{modelValue:a.form.name,"onUpdate:modelValue":s[0]||(s[0]=m=>a.form.name=m),size:"medium",type:"text","input-id":"inputName","input-name":"inputName",label:l(r)("admin.event.form.name"),placeholder:l(r)("admin.event.form.name")},null,8,["modelValue","label","placeholder"]),w(ne,{modelValue:a.form.name_en,"onUpdate:modelValue":s[1]||(s[1]=m=>a.form.name_en=m),size:"medium",type:"text","input-id":"inputNameEn","input-name":"inputNameEn",label:l(r)("admin.event.form.nameEn"),placeholder:l(r)("admin.event.form.nameEn")},null,8,["modelValue","label","placeholder"]),a.nameEnError?(i(),u("p",qe,o(a.nameEnError),1)):R("",!0),e("p",He,[s[8]||(s[8]=e("span",null,"※",-1)),e("span",null,o(l(r)("admin.event.form.nameEnHint")),1)]),e("div",Ge,[e("p",Xe,[O(o(l(r)("common.country.searchPlaceholder"))+" ",1),a.form.country_code?(i(),u("span",Fe," ["+o(d.value)+"] ",1)):R("",!0)]),w(ge,{modelValue:a.form.country_code,"onUpdate:modelValue":s[2]||(s[2]=m=>a.form.country_code=m),"label-show":!1},null,8,["modelValue"])]),w(Z,{modelValue:a.form.event_cate,"onUpdate:modelValue":s[3]||(s[3]=m=>a.form.event_cate=m),label:l(r)("admin.event.form.category"),options:_.value,placeholder:l(r)("admin.event.form.category")},null,8,["modelValue","label","options","placeholder"]),e("div",Ke,[h(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=m=>a.form.start_date=m),class:"input"},null,512),[[$,a.form.start_date]]),h(e("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=m=>a.form.end_date=m),class:"input"},null,512),[[$,a.form.end_date]])]),h(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=m=>a.form.content=m),rows:"6",class:"input",placeholder:l(r)("admin.event.form.content")},null,8,Ye),[[$,a.form.content]]),h(e("textarea",{"onUpdate:modelValue":s[7]||(s[7]=m=>a.form.payinfo=m),rows:"5",class:"input",placeholder:l(r)("admin.event.form.payinfo")},null,8,We),[[$,a.form.payinfo]])]))}}),Qe={class:"space-y-6"},Ze={class:"text-base font-semibold text-neutral-800 dark:text-neutral-100"},et={key:0,class:"pl-4 space-y-4"},tt={class:"space-y-2"},lt={class:"text-sm font-medium"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},at={class:"text-xs text-neutral-500 dark:text-neutral-400 flex items-start gap-1"},ot=["placeholder"],st=["placeholder"],dt=D({__name:"EventRegistrationSection",props:{form:{}},setup(a){const{t:r}=P(),t=a,v=C(()=>t.form.registration_use);return(_,d)=>(i(),u("section",Qe,[e("h2",Ze,o(l(r)("admin.event.form.registrationTitle")),1),w(X,{modelValue:a.form.registration_use,"onUpdate:modelValue":d[0]||(d[0]=n=>a.form.registration_use=n),label:l(r)("admin.event.form.registrationUse")},null,8,["modelValue","label"]),v.value?(i(),u("div",et,[e("div",tt,[e("label",lt,o(l(r)("admin.event.form.registrationPeriod")),1),e("div",nt,[h(e("input",{type:"datetime-local","onUpdate:modelValue":d[1]||(d[1]=n=>a.form.registration_start_at=n),class:"input"},null,512),[[$,a.form.registration_start_at]]),h(e("input",{type:"datetime-local","onUpdate:modelValue":d[2]||(d[2]=n=>a.form.registration_end_at=n),class:"input"},null,512),[[$,a.form.registration_end_at]])])]),e("p",at,[d[8]||(d[8]=e("span",null,"※",-1)),e("span",null,o(l(r)("admin.event.form.registrationGuide")),1)]),w(X,{modelValue:a.form.multiple_registration_use,"onUpdate:modelValue":d[3]||(d[3]=n=>a.form.multiple_registration_use=n),label:l(r)("admin.event.form.multipleRegistration")},null,8,["modelValue","label"]),w(X,{modelValue:a.form.edit_registration_use,"onUpdate:modelValue":d[4]||(d[4]=n=>a.form.edit_registration_use=n),label:l(r)("admin.event.form.editRegistration")},null,8,["modelValue","label"]),w(X,{modelValue:a.form.open_registration_list,"onUpdate:modelValue":d[5]||(d[5]=n=>a.form.open_registration_list=n),label:l(r)("admin.event.form.openRegistrationList")},null,8,["modelValue","label"]),h(e("input",{type:"number","onUpdate:modelValue":d[6]||(d[6]=n=>a.form.maximum_registration=n),min:"0",class:"input",placeholder:l(r)("admin.event.form.maxRegistration")},null,8,ot),[[$,a.form.maximum_registration,void 0,{number:!0}]]),h(e("input",{type:"number","onUpdate:modelValue":d[7]||(d[7]=n=>a.form.option_limit=n),min:"0",class:"input",placeholder:l(r)("admin.event.form.optionLimit")},null,8,st),[[$,a.form.option_limit,void 0,{number:!0}]])])):R("",!0)]))}}),rt={class:"rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-4 space-y-4"},it={class:"flex items-center justify-between"},ut={class:"text-base font-semibold text-neutral-800 dark:text-neutral-100"},mt={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400"},ct={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400"},vt={key:2,class:"divide-y divide-neutral-200 dark:divide-neutral-700"},pt={class:"min-w-0"},ft={class:"text-sm font-medium text-neutral-800 dark:text-neutral-100"},xt={key:0,class:"text-neutral-500 dark:text-neutral-400"},bt=["href"],_t={class:"flex justify-end"},ht=["onClick"],kt=D({__name:"EventLinkSection",props:{links:{},loading:{type:Boolean}},emits:["add","remove"],setup(a,{emit:r}){const{t}=P(),v=r;return(_,d)=>(i(),u("section",rt,[e("div",it,[e("h2",ut,o(l(t)("admin.event.link.title")),1),w(F,{size:"small",onClick:d[0]||(d[0]=n=>v("add"))},{default:q(()=>[O(o(l(t)("admin.event.modal.linkTitle")),1)]),_:1})]),a.loading?(i(),u("div",mt,o(l(t)("admin.event.link.loading")),1)):a.links.length===0?(i(),u("div",ct,o(l(t)("admin.event.link.empty")),1)):(i(),u("ul",vt,[(i(!0),u(T,null,H(a.links,n=>(i(),u("li",{key:n.id,class:"py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},[e("div",pt,[e("div",ft,[O(o(n.type)+" ",1),n.title?(i(),u("span",xt," · "+o(n.title),1)):R("",!0)]),e("a",{href:n.link,target:"_blank",rel:"noopener",class:"block text-xs text-blue-600 dark:text-blue-400 truncate"},o(n.link),9,bt)]),e("div",_t,[e("button",{type:"button",class:"text-xs px-2 py-1 rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-700",onClick:s=>v("remove",n.id)},o(l(t)("common.button.delete")),9,ht)])]))),128))]))]))}}),gt={class:"rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-4 space-y-4"},yt={class:"flex items-center justify-between"},$t={class:"text-base font-semibold text-neutral-800 dark:text-neutral-100"},wt={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400"},Vt={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400"},Et={key:2,class:"divide-y divide-neutral-200 dark:divide-neutral-700"},Ct={class:"min-w-0"},Ut={class:"text-sm font-medium text-neutral-800 dark:text-neutral-100"},St={class:"text-neutral-500 dark:text-neutral-400"},Rt={class:"text-xs text-neutral-500 dark:text-neutral-400 space-x-2"},Bt={key:0},Dt={key:1},Mt={key:2},Tt={key:3},Ot={key:4},Lt={class:"flex justify-end"},Nt=["onClick"],It=D({__name:"EventOptionSection",props:{options:{},loading:{type:Boolean}},emits:["add","remove"],setup(a,{emit:r}){const{t}=P(),v=r;return(_,d)=>(i(),u("section",gt,[e("div",yt,[e("h2",$t,o(l(t)("admin.event.option.title")),1),w(F,{size:"small",onClick:d[0]||(d[0]=n=>v("add"))},{default:q(()=>[O(o(l(t)("admin.event.modal.optionTitle")),1)]),_:1})]),a.loading?(i(),u("div",wt,o(l(t)("admin.event.option.loading")),1)):a.options.length===0?(i(),u("div",Vt,o(l(t)("admin.event.option.empty")),1)):(i(),u("ul",Et,[(i(!0),u(T,null,H(a.options,n=>(i(),u("li",{key:n.id,class:"py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},[e("div",Ct,[e("div",Ut,[O(o(n.name)+" ",1),e("span",St," · "+o(n.code),1)]),e("div",Rt,[n.option_category?(i(),u("span",Bt,o(n.option_category),1)):R("",!0),n.gender_type?(i(),u("span",Dt," · "+o(n.gender_type),1)):R("",!0),n.round_type?(i(),u("span",Mt," · "+o(n.round_type),1)):R("",!0),n.music_request_use?(i(),u("span",Tt," · "+o(l(t)("admin.event.option.musicRequest")),1)):R("",!0),n.countable===!1?(i(),u("span",Ot," · "+o(l(t)("admin.event.option.notCountable")),1)):R("",!0)])]),e("div",Lt,[e("button",{type:"button",class:"text-xs px-2 py-1 rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-700",onClick:s=>v("remove",n.id)},o(l(t)("common.button.delete")),9,Nt)])]))),128))]))]))}}),Pt={class:"rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-4 space-y-4"},zt={class:"flex items-center justify-between"},jt={class:"text-base font-semibold text-neutral-800 dark:text-neutral-100"},At={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400"},qt={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400"},Ht={key:2,class:"space-y-4"},Gt={class:"px-3 py-2 text-sm font-semibold bg-neutral-50 dark:bg-neutral-900/40 text-neutral-800 dark:text-neutral-100"},Xt={class:"divide-y divide-neutral-200 dark:divide-neutral-700"},Ft={class:"min-w-0"},Kt={class:"text-xs text-neutral-500 dark:text-neutral-400"},Yt={class:"text-sm text-neutral-800 dark:text-neutral-100 whitespace-pre-line"},Wt={key:0,class:"text-xs text-neutral-500 dark:text-neutral-400 truncate"},Jt={class:"flex justify-end sm:pt-1"},Qt=["onClick"],Zt=D({__name:"EventScheduleSection",props:{schedules:{},loading:{type:Boolean}},emits:["add","remove"],setup(a,{emit:r}){const{t}=P(),v=a,_=r,d=C(()=>{const n=new Map;for(const s of v.schedules)n.has(s.schedule_date)||n.set(s.schedule_date,[]),n.get(s.schedule_date).push(s);return Array.from(n.entries()).map(([s,m])=>({date:s,items:m}))});return(n,s)=>(i(),u("section",Pt,[e("div",zt,[e("h2",jt,o(l(t)("admin.event.schedule.title")),1),w(F,{size:"small",onClick:s[0]||(s[0]=m=>_("add"))},{default:q(()=>[O(o(l(t)("admin.event.modal.scheduleTitle")),1)]),_:1})]),a.loading?(i(),u("div",At,o(l(t)("admin.event.schedule.loading")),1)):a.schedules.length===0?(i(),u("div",qt,o(l(t)("admin.event.schedule.empty")),1)):(i(),u("div",Ht,[(i(!0),u(T,null,H(d.value,m=>(i(),u("div",{key:m.date,class:"rounded-lg border border-neutral-200 dark:border-neutral-700 overflow-hidden"},[e("div",Gt,o(m.date),1),e("ul",Xt,[(i(!0),u(T,null,H(m.items,f=>(i(),u("li",{key:f.id,class:"px-3 py-3 flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3"},[e("div",Ft,[e("div",Kt,o(f.start_time)+" ~ "+o(f.end_time),1),e("div",Yt,o(f.content_ko),1),f.content_en?(i(),u("div",Wt," EN: "+o(f.content_en),1)):R("",!0)]),e("div",Jt,[e("button",{type:"button",class:"text-xs px-2 py-1 rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-700",onClick:E=>_("remove",f.id)},o(l(t)("common.button.delete")),9,Qt)])]))),128))])]))),128))]))]))}}),el={class:"space-y-4 text-left p-6"},tl={class:"text-sm text-neutral-700 dark:text-neutral-200"},ll=["value"],nl={class:"text-sm text-neutral-700 dark:text-neutral-200"},al=["placeholder"],ol={class:"text-sm text-neutral-700 dark:text-neutral-200"},sl=["placeholder"],dl={class:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},rl=D({__name:"LinkModal",setup(a,{expose:r}){const{t}=P(),v=C(()=>[{value:"homepage",label:t("admin.event.linkmodal.type.homepage")},{value:"ticket",label:t("admin.event.linkmodal.type.ticket")},{value:"instagram",label:t("admin.event.linkmodal.type.instagram")},{value:"youtube",label:t("admin.event.linkmodal.type.youtube")},{value:"kakaotalk",label:t("admin.event.linkmodal.type.kakaotalk")},{value:"facebook",label:t("admin.event.linkmodal.type.facebook")},{value:"x",label:t("admin.event.linkmodal.type.x")},{value:"tiktok",label:t("admin.event.linkmodal.type.tiktok")},{value:"rednote",label:t("admin.event.linkmodal.type.rednote")},{value:"contact",label:t("admin.event.linkmodal.type.contact")},{value:"map",label:t("admin.event.linkmodal.type.map")},{value:"email",label:t("admin.event.linkmodal.type.email")},{value:"etc",label:t("admin.event.linkmodal.type.etc")}]),_=b("homepage"),d=b(""),n=b(""),s=C(()=>({type:_.value,title:d.value.trim()||null,url:n.value.trim()})),m=C(()=>t(`admin.event.linkmodal.urlPlaceholder.${_.value}`,t("admin.event.linkmodal.urlPlaceholder.default"))),f=C(()=>t(`admin.event.linkmodal.urlHint.${_.value}`,t("admin.event.linkmodal.urlHint.default")));function E(){if(!s.value.url)throw new Error(t("admin.event.linkmodal.validate.urlRequired"));const g=s.value.url;switch(s.value.type){case"email":if(!/^mailto:/i.test(g))throw new Error(t("admin.event.linkmodal.validate.urlProtocol.email"));break;case"contact":if(!/^tel:/i.test(g))throw new Error(t("admin.event.linkmodal.validate.urlProtocol.contact"));break;default:if(!/^https?:\/\//i.test(g))throw new Error(t("admin.event.linkmodal.validate.urlProtocol.default"))}return!0}return r({getPayload(){return E(),s.value}}),(g,V)=>(i(),u("div",el,[e("div",null,[e("label",tl,o(l(t)("admin.event.linkmodal.typeLabel")),1),h(e("select",{"onUpdate:modelValue":V[0]||(V[0]=k=>_.value=k),class:"input mt-1"},[(i(!0),u(T,null,H(v.value,k=>(i(),u("option",{key:k.value,value:k.value},o(k.label),9,ll))),128))],512),[[ye,_.value]])]),e("div",null,[e("label",nl,o(l(t)("admin.event.linkmodal.titleLabel")),1),h(e("input",{"onUpdate:modelValue":V[1]||(V[1]=k=>d.value=k),class:"input mt-1",placeholder:l(t)("admin.event.linkmodal.titlePlaceholder")},null,8,al),[[$,d.value]])]),e("div",null,[e("label",ol,o(l(t)("admin.event.linkmodal.urlLabel")),1),h(e("input",{"onUpdate:modelValue":V[2]||(V[2]=k=>n.value=k),class:"input mt-1",placeholder:m.value},null,8,sl),[[$,n.value]]),e("p",dl,o(f.value),1)])]))}}),Q={MALE:"male",FEMALE:"female",MIXED:"mixed"},il=[{value:Q.MALE,label:"common.gender.male"},{value:Q.FEMALE,label:"common.gender.female"},{value:Q.MIXED,label:"common.gender.mixed"}],ul={class:"space-y-4 text-left p-6"},ml={class:"grid grid-cols-2 gap-3"},cl={class:"text-sm text-neutral-700 dark:text-neutral-200"},vl=["placeholder"],pl={class:"text-sm text-neutral-700 dark:text-neutral-200"},fl=["placeholder"],xl={class:"text-sm text-neutral-700 dark:text-neutral-200"},bl=["placeholder"],_l={class:"grid grid-cols-2 gap-3"},hl={class:"flex items-center gap-3"},kl={for:"music",class:"text-sm text-neutral-700 dark:text-neutral-200"},gl={class:"flex items-center gap-3"},yl={for:"countable",class:"text-sm text-neutral-700 dark:text-neutral-200"},$l={class:"text-sm text-neutral-700 dark:text-neutral-200"},wl=D({__name:"OptionModal",setup(a,{expose:r}){const{t}=P(),v=b(""),_=b(""),d=b(null),n=b(null),s=b(null),m=b(!1),f=b(!0),E=b(0),g=C(()=>il.map(U=>({...U,label:t(U.label)}))),V=C(()=>Ue.map(U=>({...U,label:t(U.label)}))),k=C(()=>({name:v.value.trim(),code:_.value.trim(),option_category:d.value,gender_type:n.value,round_type:s.value,music_request_use:m.value,countable:f.value,sort_order:E.value??0}));function L(){if(!k.value.name)throw new Error(t("admin.event.optionmodal.validate.nameRequired"));if(!k.value.code)throw new Error(t("admin.event.optionmodal.validate.codeRequired"));return!0}return r({getPayload(){return L(),k.value}}),(U,c)=>(i(),u("div",ul,[e("div",ml,[e("div",null,[e("label",cl,o(l(t)("admin.event.optionmodal.label.name")),1),h(e("input",{"onUpdate:modelValue":c[0]||(c[0]=p=>v.value=p),class:"input mt-1",placeholder:l(t)("admin.event.optionmodal.placeholder.name")},null,8,vl),[[$,v.value]])]),e("div",null,[e("label",pl,o(l(t)("admin.event.optionmodal.label.code")),1),h(e("input",{"onUpdate:modelValue":c[1]||(c[1]=p=>_.value=p),class:"input mt-1",placeholder:l(t)("admin.event.optionmodal.placeholder.code")},null,8,fl),[[$,_.value]])])]),e("div",null,[e("label",xl,o(l(t)("admin.event.optionmodal.label.category")),1),h(e("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>d.value=p),class:"input mt-1",placeholder:l(t)("admin.event.optionmodal.placeholder.category")},null,8,bl),[[$,d.value]])]),e("div",_l,[e("div",null,[w(Z,{modelValue:n.value,"onUpdate:modelValue":c[3]||(c[3]=p=>n.value=p),label:l(t)("admin.event.optionmodal.label.gender"),options:g.value,placeholder:l(t)("admin.event.optionmodal.select.none")},null,8,["modelValue","label","options","placeholder"])]),e("div",null,[w(Z,{modelValue:s.value,"onUpdate:modelValue":c[4]||(c[4]=p=>s.value=p),label:l(t)("admin.event.optionmodal.label.round"),options:V.value,placeholder:l(t)("admin.event.optionmodal.select.none")},null,8,["modelValue","label","options","placeholder"])])]),e("div",hl,[h(e("input",{id:"music",type:"checkbox","onUpdate:modelValue":c[5]||(c[5]=p=>m.value=p)},null,512),[[ae,m.value]]),e("label",kl,o(l(t)("admin.event.optionmodal.label.music")),1)]),e("div",gl,[h(e("input",{id:"countable",type:"checkbox","onUpdate:modelValue":c[6]||(c[6]=p=>f.value=p)},null,512),[[ae,f.value]]),e("label",yl,o(l(t)("admin.event.optionmodal.label.countable")),1)]),e("div",null,[e("label",$l,o(l(t)("admin.event.optionmodal.label.sortOrder")),1),h(e("input",{type:"number","onUpdate:modelValue":c[7]||(c[7]=p=>E.value=p),class:"input mt-1"},null,512),[[$,E.value,void 0,{number:!0}]])])]))}}),Vl={class:"space-y-4 text-left p-6"},El={class:"grid grid-cols-3 gap-3"},Cl={class:"text-sm text-neutral-700 dark:text-neutral-200"},Ul={class:"text-sm text-neutral-700 dark:text-neutral-200"},Sl={class:"text-sm text-neutral-700 dark:text-neutral-200"},Rl={class:"text-sm text-neutral-700 dark:text-neutral-200"},Bl=["placeholder"],Dl={class:"rounded-lg border border-neutral-200 dark:border-neutral-700 p-3"},Ml={class:"text-sm text-neutral-700 dark:text-neutral-200 cursor-pointer"},Tl={class:"mt-3 space-y-3"},Ol={class:"text-xs text-neutral-600 dark:text-neutral-300"},Ll={class:"text-xs text-neutral-600 dark:text-neutral-300"},Nl={class:"text-xs text-neutral-600 dark:text-neutral-300"},Il={class:"text-xs text-neutral-600 dark:text-neutral-300"},Pl={class:"text-sm text-neutral-700 dark:text-neutral-200"},zl=D({__name:"ScheduleModal",setup(a,{expose:r}){const{t}=P(),v=b(""),_=b(""),d=b(""),n=b(""),s=b(""),m=b(""),f=b(""),E=b(""),g=b(0),V=U=>U?`${U}:00`:"",k=C(()=>({schedule_date:v.value,start_time:V(_.value),end_time:V(d.value),content_ko:n.value.trim(),content_en:s.value.trim()||null,content_zh:m.value.trim()||null,content_zh_tw:f.value.trim()||null,content_ja:E.value.trim()||null,sort_order:g.value??0}));function L(){if(!k.value.schedule_date)throw new Error(t("admin.event.schedulemodal.validate.dateRequired"));if(!_.value)throw new Error(t("admin.event.schedulemodal.validate.startRequired"));if(!d.value)throw new Error(t("admin.event.schedulemodal.validate.endRequired"));if(!k.value.content_ko)throw new Error(t("admin.event.schedulemodal.validate.contentKoRequired"));if(k.value.end_time<=k.value.start_time)throw new Error(t("admin.event.schedulemodal.validate.timeInvalid"));return!0}return r({getPayload(){return L(),k.value}}),(U,c)=>(i(),u("div",Vl,[e("div",El,[e("div",null,[e("label",Cl,o(l(t)("admin.event.schedulemodal.label.date")),1),h(e("input",{type:"date","onUpdate:modelValue":c[0]||(c[0]=p=>v.value=p),class:"input mt-1"},null,512),[[$,v.value]])]),e("div",null,[e("label",Ul,o(l(t)("admin.event.schedulemodal.label.start")),1),h(e("input",{type:"time","onUpdate:modelValue":c[1]||(c[1]=p=>_.value=p),class:"input mt-1"},null,512),[[$,_.value]])]),e("div",null,[e("label",Sl,o(l(t)("admin.event.schedulemodal.label.end")),1),h(e("input",{type:"time","onUpdate:modelValue":c[2]||(c[2]=p=>d.value=p),class:"input mt-1"},null,512),[[$,d.value]])])]),e("div",null,[e("label",Rl,o(l(t)("admin.event.schedulemodal.label.contentKo"))+" * ",1),h(e("textarea",{"onUpdate:modelValue":c[3]||(c[3]=p=>n.value=p),class:"input mt-1",rows:"3",placeholder:l(t)("admin.event.schedulemodal.placeholder.contentKo")},null,8,Bl),[[$,n.value]])]),e("details",Dl,[e("summary",Ml,o(l(t)("admin.event.schedulemodal.label.contentMulti")),1),e("div",Tl,[e("div",null,[e("label",Ol,o(l(t)("admin.event.schedulemodal.lang.en")),1),h(e("input",{"onUpdate:modelValue":c[4]||(c[4]=p=>s.value=p),class:"input mt-1"},null,512),[[$,s.value]])]),e("div",null,[e("label",Ll,o(l(t)("admin.event.schedulemodal.lang.zh")),1),h(e("input",{"onUpdate:modelValue":c[5]||(c[5]=p=>m.value=p),class:"input mt-1"},null,512),[[$,m.value]])]),e("div",null,[e("label",Nl,o(l(t)("admin.event.schedulemodal.lang.zhTw")),1),h(e("input",{"onUpdate:modelValue":c[6]||(c[6]=p=>f.value=p),class:"input mt-1"},null,512),[[$,f.value]])]),e("div",null,[e("label",Il,o(l(t)("admin.event.schedulemodal.lang.ja")),1),h(e("input",{"onUpdate:modelValue":c[7]||(c[7]=p=>E.value=p),class:"input mt-1"},null,512),[[$,E.value]])])])]),e("div",null,[e("label",Pl,o(l(t)("admin.event.schedulemodal.label.sortOrder")),1),h(e("input",{type:"number","onUpdate:modelValue":c[8]||(c[8]=p=>g.value=p),class:"input mt-1"},null,512),[[$,g.value,void 0,{number:!0}]])])]))}}),jl={class:"p-6 bg-neutral-50 dark:bg-neutral-900 min-h-[calc(100vh-54px)]"},Al={class:"max-w-[1024px] mx-auto space-y-10"},ql={class:"flex items-center justify-between"},Hl={class:"text-xl font-semibold"},Gl={key:0,class:"text-sm text-red-500"},Xl={class:"flex justify-end gap-2"},Wl=D({__name:"EditView",setup(a){const{t:r}=P(),t=we(),v=Ve(),{showModal:_}=$e(),d=Ee(),n=C(()=>{const x=t.params.eventId;return typeof x=="string"?x:null}),s=b(!1),m=b(!1),f=b(null),E=b(null),g=b({name:"",name_en:null,country_code:null,event_cate:null,start_date:null,end_date:null,open:!1,status:"draft",content:null,payinfo:null,registration_use:!0,registration_start_at:null,registration_end_at:null,multiple_registration_use:!1,edit_registration_use:!1,open_registration_list:!1,maximum_registration:null,option_limit:null}),V=C(()=>{var x;return!!((x=g.value.name_en)!=null&&x.length)});async function k(x){s.value=!0,f.value=null;try{await d.fetchEventDetail(x),Object.assign(g.value,d.currentEvent)}catch(z){f.value=(z==null?void 0:z.message)??r("admin.event.alert.loadError")}finally{s.value=!1}}G(n,x=>{if(!x){v.replace({name:"admin-event-list"});return}k(x)},{immediate:!0});async function L(){if(n.value){m.value=!0,f.value=null;try{await d.updateEvent(n.value,g.value),alert(r("common.alert.saved"))}catch(x){f.value=(x==null?void 0:x.message)??r("admin.event.alert.saveError")}finally{m.value=!1}}}async function U(x){if(n.value){if(x&&!V.value){alert(r("admin.event.edit.needNameEn"));return}await d.updateEvent(n.value,{open:x,status:x?"open":"draft"}),g.value.open=x,g.value.status=x?"open":"draft"}}const c=()=>n.value&&_({title:r("admin.event.modal.linkTitle"),type:"confirm",contentComponent:W(rl),confirmCallback:x=>d.addLink(n.value,x).then(()=>!0)}),p=()=>n.value&&_({title:r("admin.event.modal.optionTitle"),type:"bottom",contentComponent:W(wl),confirmCallback:x=>d.addOption(n.value,x).then(()=>!0)}),K=()=>n.value&&_({title:r("admin.event.modal.scheduleTitle"),type:"bottom",contentComponent:W(zl),confirmCallback:x=>d.addSchedule(n.value,x).then(()=>!0)});return(x,z)=>(i(),u("main",jl,[e("div",Al,[e("div",ql,[e("h1",Hl,o(l(r)("admin.event.edit.title")),1),w(X,{"model-value":g.value.open,disabled:!V.value,"onUpdate:modelValue":U,label:g.value.status==="open"?l(r)("admin.event.status.open"):l(r)("admin.event.status.closed")},null,8,["model-value","disabled","label"])]),f.value?(i(),u("p",Gl,o(f.value),1)):R("",!0),w(Je,{form:g.value,"name-en-error":E.value},null,8,["form","name-en-error"]),w(dt,{form:g.value},null,8,["form"]),w(kt,{links:l(d).links,loading:l(d).linksLoading,onAdd:c,onDelete:l(d).deleteLink},null,8,["links","loading","onDelete"]),w(It,{options:l(d).options,loading:l(d).optionsLoading,onAdd:p,onDelete:l(d).deleteOption},null,8,["options","loading","onDelete"]),w(Zt,{schedules:l(d).schedules,loading:l(d).schedulesLoading,onAdd:K,onDelete:l(d).deleteSchedule},null,8,["schedules","loading","onDelete"]),e("div",Xl,[w(F,{onClick:z[0]||(z[0]=y=>l(v).back())},{default:q(()=>[O(o(l(r)("common.button.back")),1)]),_:1}),w(F,{type:"primary",disabled:m.value,onClick:L},{default:q(()=>[O(o(l(r)("common.button.save")),1)]),_:1},8,["disabled"])])])]))}});export{Wl as default};
