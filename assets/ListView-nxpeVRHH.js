import{d as C,j as E,k as f,l as $,m as D,c as o,a as t,f as b,t as n,K as r,p as F,v as L,F as g,r as h,y as N,o as d,M as k,b as m}from"./index-Bd0HrmgB.js";import{u as V}from"./event-Dzj0lo9h.js";const S={class:"p-4 md:bg-neutral-50 dark:bg-neutral-900 min-h-[calc(100vh-54px)]"},j={class:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mb-2"},B={class:"text-sm text-neutral-600 dark:text-neutral-400 mb-6"},I={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400 mb-4"},M={class:"mb-6 flex flex-col md:flex-row md:items-center gap-4 md:justify-between"},R={class:"flex flex-col md:flex-row md:items-center gap-4"},T=["placeholder"],O={class:"flex gap-2"},P=["onClick"],q={class:"md:hidden space-y-4"},z={class:"flex items-start justify-between gap-2"},A={class:"text-sm font-semibold text-neutral-900 dark:text-neutral-100"},K={class:"text-xs text-neutral-500 dark:text-neutral-400"},U={class:"grid grid-cols-2 gap-x-3 gap-y-2 text-xs text-neutral-600 dark:text-neutral-300"},G={class:"text-xs text-neutral-500 dark:text-neutral-400"},H={class:"flex gap-2 pt-2"},J=["onClick"],Q=["onClick"],W={key:0,class:"py-10 text-center text-sm text-neutral-500 dark:text-neutral-400"},X={class:"hidden md:block overflow-x-auto bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-sm"},Y={class:"w-full border-collapse"},Z={class:"bg-neutral-100 dark:bg-neutral-700"},tt={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center w-16"},et={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300"},nt={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},at={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},rt={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},st={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},lt={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},ot={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},dt={class:"px-4 py-3 text-xs font-semibold text-neutral-500 dark:text-neutral-300 text-center"},it={class:"px-4 py-3 text-center text-sm text-neutral-500"},ut={class:"px-4 py-3"},xt={class:"flex flex-col"},ct={class:"text-sm text-neutral-900 dark:text-neutral-100"},mt={class:"text-xs text-neutral-500 dark:text-neutral-400"},pt={class:"px-4 py-3 text-center"},_t={class:"px-4 py-3 text-center"},bt={class:"px-4 py-3 text-center text-sm"},gt={class:"px-4 py-3 text-center text-sm"},ht={class:"px-4 py-3 text-center text-sm"},kt={class:"px-4 py-3 text-center text-sm"},vt={class:"px-4 py-3 text-center"},ft=["onClick"],yt={key:0},wt={colspan:"9",class:"px-4 py-10 text-center text-sm text-neutral-500"},Ft=C({__name:"ListView",setup(Ct){const{t:a}=E(),p=N(),i=V(),_=f(""),y=["all","open","closed"],u=f("all");$(async()=>{try{await i.fetchEvents()}catch(l){console.error(a("admin.event.alert.listError"),l)}});const x=D(()=>{let l=i.events;u.value==="open"?l=l.filter(e=>e.open):u.value==="closed"&&(l=l.filter(e=>!e.open));const s=_.value.trim().toLowerCase();return s&&(l=l.filter(e=>e.name.toLowerCase().includes(s)||(e.name_en??"").toLowerCase().includes(s))),l});async function w(){if(confirm(a("admin.event.confirm.create")))try{const l=a("admin.event.draft.defaultName"),s=await i.createDraftEvent(l);p.push({name:"admin-event-edit",params:{eventId:s}})}catch(l){alert(a("admin.event.confirm.noPermission")),console.error(l)}}function v(l){p.push({name:"admin-event-edit",params:{eventId:l}})}return(l,s)=>(d(),o("main",S,[t("h3",j,n(r(a)("admin.event.listTitle")),1),t("p",B,n(r(a)("admin.event.listDescription")),1),r(i).loading?(d(),o("div",I,n(r(a)("admin.event.listLoading")),1)):b("",!0),t("div",M,[t("div",R,[F(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),type:"text",placeholder:r(a)("admin.event.searchPlaceholder"),class:"w-full md:w-64 px-3 py-2 text-sm rounded-md border border-neutral-300 bg-white text-neutral-800 focus:outline-none focus:ring-2 focus:ring-neutral-400 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600"},null,8,T),[[L,_.value]]),t("div",O,[(d(),o(g,null,h(y,e=>t("button",{key:e,onClick:c=>u.value=e,class:k(["px-3 py-1.5 text-sm rounded-full border transition",u.value===e?"bg-neutral-900 text-white border-neutral-900 dark:bg-white dark:text-neutral-900 dark:border-white":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-600 dark:hover:bg-neutral-700"])},n(r(a)(`admin.event.filter.${e}`)),11,P)),64))])]),t("button",{onClick:w,class:"w-full md:w-auto px-4 py-2 text-sm rounded-md bg-neutral-900 text-white hover:bg-neutral-800 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-200"},n(r(a)("admin.event.button.create")),1)]),t("div",q,[(d(!0),o(g,null,h(x.value,e=>(d(),o("div",{key:e.id,class:"bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 space-y-3"},[t("div",z,[t("div",null,[t("div",A,n(e.name),1),t("div",K,n(e.name_en??"draft"),1)]),t("span",{class:k(["inline-flex px-2 py-0.5 text-xs rounded-full",e.open?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":"bg-neutral-200 text-neutral-600 dark:bg-neutral-600 dark:text-neutral-200"])},n(e.open?r(a)("admin.event.status.open"):r(a)("admin.event.status.closed")),3)]),t("div",U,[t("div",null,[s[1]||(s[1]=t("span",{class:"block text-neutral-400"},"Country",-1)),m(" "+n(e.country_code??"-"),1)]),t("div",null,[s[2]||(s[2]=t("span",{class:"block text-neutral-400"},"Start",-1)),m(" "+n(e.start_date??"-"),1)]),t("div",null,[s[3]||(s[3]=t("span",{class:"block text-neutral-400"},"Registration",-1)),m(" "+n(e.registration_use?"ON":"OFF"),1)]),t("div",null,[s[4]||(s[4]=t("span",{class:"block text-neutral-400"},"End",-1)),m(" "+n(e.end_date??"-"),1)])]),t("div",G,[s[5]||(s[5]=t("span",{class:"font-medium"},"Registration:",-1)),t("span",null,n(e.registration_use?`${e.registration_start_at??"-"} ~ ${e.registration_end_at??"-"}`:"-"),1)]),t("div",H,[t("button",{onClick:c=>v(e.id),class:"flex-1 px-3 py-2 text-xs rounded-md bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-200"},n(r(a)("admin.event.button.edit")),9,J),t("button",{onClick:c=>r(p).push({name:"admin-event-registrations",params:{eventId:e.id}}),class:"flex-1 px-3 py-2 text-xs rounded-md bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-200"}," 참가자 ",8,Q)])]))),128)),!r(i).loading&&x.value.length===0?(d(),o("div",W,n(r(a)("admin.event.empty")),1)):b("",!0)]),t("div",X,[t("table",Y,[t("thead",Z,[t("tr",null,[t("th",tt,n(r(a)("admin.event.table.num")),1),t("th",et,n(r(a)("admin.event.table.name")),1),t("th",nt,n(r(a)("admin.event.table.country")),1),t("th",at,n(r(a)("admin.event.table.open")),1),t("th",rt,n(r(a)("admin.event.table.registrationStart")),1),t("th",st,n(r(a)("admin.event.table.registrationEnd")),1),t("th",lt,n(r(a)("admin.event.table.startDate")),1),t("th",ot,n(r(a)("admin.event.table.endDate")),1),t("th",dt,n(r(a)("admin.event.table.manage")),1)])]),t("tbody",null,[(d(!0),o(g,null,h(x.value,(e,c)=>(d(),o("tr",{key:e.id,class:"border-t border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700"},[t("td",it,n(c+1),1),t("td",ut,[t("div",xt,[t("span",ct,n(e.name),1),t("span",mt,n(e.name_en??"draft"),1)])]),t("td",pt,n(e.country_code),1),t("td",_t,[t("span",{class:k(["inline-flex px-2 py-1 text-xs rounded-full",e.open?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":"bg-neutral-200 text-neutral-600 dark:bg-neutral-600 dark:text-neutral-200"])},n(e.open?r(a)("admin.event.status.open"):r(a)("admin.event.status.closed")),3)]),t("td",bt,n(e.registration_use?e.registration_start_at??"-":"-"),1),t("td",gt,n(e.registration_use?e.registration_end_at??"-":"-"),1),t("td",ht,n(e.start_date??"-"),1),t("td",kt,n(e.end_date??"-"),1),t("td",vt,[t("button",{onClick:Et=>v(e.id),class:"px-3 py-1 text-xs rounded-md bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-200"},n(r(a)("admin.event.button.edit")),9,ft)])]))),128)),!r(i).loading&&x.value.length===0?(d(),o("tr",yt,[t("td",wt,n(r(a)("admin.event.empty")),1)])):b("",!0)])])])]))}});export{Ft as default};
