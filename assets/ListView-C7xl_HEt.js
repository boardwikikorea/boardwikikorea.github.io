import{d as E,u as D,r as h,x as L,g as F,c as l,b as t,a as b,t as s,e as a,k as V,v as $,F as g,h as v,z as B,o as d,n as p}from"./index-DCiLG-Z1.js";import{u as N}from"./event-D8W9TIxh.js";const z={class:"p-4 md:bg-neutral-50 dark:bg-neutral-900 min-h-[calc(100vh-54px)]"},I={class:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mb-2"},M={class:"text-sm text-neutral-600 dark:text-neutral-400 mb-6"},P={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400 mb-4"},R={class:"mb-6 flex flex-col md:flex-row md:items-center gap-4 md:justify-between"},S={class:"flex flex-col md:flex-row md:items-center gap-4"},T=["placeholder"],j={class:"flex gap-2"},q=["onClick"],A={class:"overflow-x-auto bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-sm"},U={class:"w-full border-collapse"},G={class:"bg-neutral-100 dark:bg-neutral-700"},H={class:"px-4 py-3 text-xs text-center w-16"},J={class:"px-4 py-3 text-xs"},K={class:"px-4 py-3 text-xs text-center"},O={class:"px-4 py-3 text-xs text-center"},Q={class:"px-4 py-3 text-xs text-center"},W={class:"px-4 py-3 text-xs text-center"},X={class:"px-4 py-3 text-xs text-center"},Y={class:"px-4 py-3 text-center text-sm text-neutral-500"},Z={class:"px-4 py-3"},tt={class:"flex flex-col"},et={class:"text-sm text-neutral-900 dark:text-neutral-100"},nt={class:"text-xs text-neutral-500 dark:text-neutral-400"},st={class:"px-4 py-3 text-center"},at={class:"px-4 py-3 text-center"},rt={class:"px-4 py-3 text-center text-sm"},ot={class:"px-4 py-3 text-center text-sm"},lt={class:"px-4 py-3 text-center space-x-2"},dt=["onClick"],it=["onClick","disabled"],ct={key:0},ut={colspan:"7",class:"px-4 py-10 text-center text-sm text-neutral-500"},_t=E({__name:"ListView",setup(xt){const{t:n}=D(),u=B(),i=N(),x=h(""),k=["all","open","closed"],c=h("all");L(async()=>{try{await i.fetchEvents()}catch(r){console.error(n("admin.event.alert.listError"),r)}});const m=F(()=>{let r=i.events;c.value==="open"?r=r.filter(e=>e.open):c.value==="closed"&&(r=r.filter(e=>!e.open));const o=x.value.trim().toLowerCase();return o&&(r=r.filter(e=>e.name.toLowerCase().includes(o)||(e.name_en??"").toLowerCase().includes(o))),r});async function f(){if(confirm(n("admin.event.confirm.create")))try{const r=n("admin.event.draft.defaultName"),o=await i.createDraftEvent(r);u.push({name:"admin-event-edit",params:{eventId:o}})}catch(r){alert(n("admin.event.confirm.noPermission")),console.error(r)}}function y(r){u.push({name:"admin-event-edit",params:{eventId:r}})}function w(r){u.push({name:"admin-event-registrations",params:{eventId:r}})}return(r,o)=>(d(),l("main",z,[t("h3",I,s(a(n)("admin.event.listTitle")),1),t("p",M,s(a(n)("admin.event.listDescription")),1),a(i).loading?(d(),l("div",P,s(a(n)("admin.event.listLoading")),1)):b("",!0),t("div",R,[t("div",S,[V(t("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>x.value=e),type:"text",placeholder:a(n)("admin.event.searchPlaceholder"),class:"w-full md:w-64 px-3 py-2 text-sm rounded-md border border-neutral-300 bg-white focus:outline-none focus:ring-2 focus:ring-neutral-400 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600"},null,8,T),[[$,x.value]]),t("div",j,[(d(),l(g,null,v(k,e=>t("button",{key:e,onClick:_=>c.value=e,class:p(["px-3 py-1.5 text-sm rounded-full border transition",c.value===e?"bg-neutral-900 text-white border-neutral-900 dark:bg-white dark:text-neutral-900":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-600 dark:hover:bg-neutral-700"])},s(a(n)(`event.filter.${e}`)),11,q)),64))])]),t("button",{onClick:f,class:"w-full md:w-auto px-4 py-2 text-sm rounded-md bg-neutral-900 text-white hover:bg-neutral-800 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-200"},s(a(n)("admin.event.button.create")),1)]),t("div",A,[t("table",U,[t("thead",G,[t("tr",null,[t("th",H,s(a(n)("event.table.num")),1),t("th",J,s(a(n)("event.table.name")),1),t("th",K,s(a(n)("event.table.country")),1),t("th",O,s(a(n)("event.table.open")),1),t("th",Q,s(a(n)("event.table.startDate")),1),t("th",W,s(a(n)("event.table.endDate")),1),t("th",X,s(a(n)("event.table.manage")),1)])]),t("tbody",null,[(d(!0),l(g,null,v(m.value,(e,_)=>(d(),l("tr",{key:e.id,class:"border-t border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700"},[t("td",Y,s(_+1),1),t("td",Z,[t("div",tt,[t("span",et,s(e.name),1),t("span",nt,s(e.name_en??"draft"),1)])]),t("td",st,s(e.country_code??"-"),1),t("td",at,[t("span",{class:p(["inline-flex px-2 py-1 text-xs rounded-full",e.open?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":"bg-neutral-200 text-neutral-600 dark:bg-neutral-600 dark:text-neutral-200"])},s(e.open?a(n)("event.status.open"):a(n)("event.status.closed")),3)]),t("td",rt,s(e.start_date??"-"),1),t("td",ot,s(e.end_date??"-"),1),t("td",lt,[t("button",{onClick:C=>y(e.id),class:"px-3 py-1 text-xs rounded-md bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-200"},s(a(n)("admin.event.button.edit")),9,dt),t("button",{onClick:C=>w(e.id),disabled:!e.registration_use,class:p(["px-3 py-1 text-xs rounded-md transition",e.registration_use?"bg-blue-600 text-white hover:bg-blue-500":"bg-neutral-300 text-neutral-500 cursor-not-allowed dark:bg-neutral-600 dark:text-neutral-400"])},s(a(n)("admin.event.button.registrations")),11,it)])]))),128)),!a(i).loading&&m.value.length===0?(d(),l("tr",ct,[t("td",ut,s(a(n)("admin.event.empty")),1)])):b("",!0)])])])]))}});export{_t as default};
