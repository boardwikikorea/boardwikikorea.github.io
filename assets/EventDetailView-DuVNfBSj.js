import{d as y,c as s,m as v,A as E,b as e,t as f,F as w,h as L,o as t,a as d,y as H,g as _,n as C,C as P,q as B,r as T,f as F,e as I,E as S,i as M,D as V,z as j}from"./index-B1y5lJEh.js";import{c as A}from"./eventPublic-SonXkaWR.js";import{f as D}from"./eventPublicRegistration-DTAXvmpl.js";import{B as Z,_ as z}from"./BaseSwiper-Bk9eopRx.js";const N={class:"flex flex-col gap-4"},R={class:"w-[280px] lg:w-[420px] bg-black text-white rounded-lg p-5"},q={class:"text-2xl font-bold mb-4"},U={class:"flex flex-col gap-2 text-sm"},O={class:"truncate"},G={class:"shrink-0 text-neutral-300"},K=y({__name:"EventScheduleSwiper",props:{schedules:{}},setup(i){function u(n){const x=new Date(n);return`${String(x.getMonth()+1).padStart(2,"0")}.${String(x.getDate()).padStart(2,"0")}`}function p(n){return n.slice(0,5)}return(n,x)=>(t(),s("section",N,[v(Z,{items:i.schedules,"slides-per-view":"auto","space-between":16},{item:E(({item:r})=>[e("div",R,[e("div",q,f(u(r.date)),1),e("ul",U,[(t(!0),s(w,null,L(r.items,(m,h)=>(t(),s("li",{key:h,class:"flex justify-between gap-4"},[e("span",O,f(m.content.ko),1),e("span",G,f(p(m.startTime))+" ~ "+f(p(m.endTime)),1)]))),128))])])]),_:1},8,["items"])]))}}),W={class:"rounded-lg border border-neutral-200 bg-white p-4 flex flex-col gap-2"},X={class:"flex items-start justify-between gap-2"},Y={class:"font-semibold text-neutral-900"},J={key:0,class:"text-xs px-2 py-0.5 rounded bg-neutral-100 text-neutral-600"},Q={class:"text-sm text-neutral-600 flex flex-col gap-1"},ee={key:0},te={key:1},se={key:2},ne={key:3},oe=y({__name:"EventOptionCard",props:{option:{}},setup(i){return(u,p)=>(t(),s("div",W,[e("div",X,[e("h3",Y,f(i.option.name),1),i.option.optionCategory?(t(),s("span",J,f(i.option.optionCategory),1)):d("",!0)]),e("div",Q,[i.option.genderType?(t(),s("span",ee," 성별: "+f(i.option.genderType),1)):d("",!0),i.option.roundType?(t(),s("span",te," 라운드: "+f(i.option.roundType),1)):d("",!0),i.option.musicRequestUse?(t(),s("span",se," 음악 신청 가능 ")):d("",!0),i.option.countable?d("",!0):(t(),s("span",ne," 정원 제한 없음 "))])]))}}),le={class:"flex flex-col gap-4"},ae={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},ie=y({__name:"EventOptionList",props:{options:{}},setup(i){return(u,p)=>(t(),s("section",le,[p[0]||(p[0]=e("h2",{class:"text-lg font-semibold"}," 선택 가능한 옵션 ",-1)),e("div",ae,[(t(!0),s(w,null,L(i.options,n=>(t(),H(oe,{key:n.id,option:n},null,8,["option"]))),128))])]))}}),re=["href"],ce=y({__name:"BaseEventLinkButton",props:{link:{}},setup(i){const u=i,p=_(()=>u.link.type==="email"&&!u.link.link.startsWith("mailto:")?`mailto:${u.link.link}`:u.link.link),n=_(()=>u.link.title??m[u.link.type]??"Link"),x=_(()=>h[u.link.type]??["fas","link"]),r=_(()=>u.link.type==="ticket"),m={homepage:"홈페이지",ticket:"신청하기",instagram:"Instagram",youtube:"YouTube",facebook:"Facebook",x:"X",tiktok:"TikTok",rednote:"Rednote",kakaotalk:"KakaoTalk",map:"지도",email:"이메일",contact:"문의",etc:"링크"},h={homepage:["fas","globe"],ticket:["fas","ticket"],instagram:["fab","instagram"],youtube:["fab","youtube"],facebook:["fab","facebook"],x:["fab","x-twitter"],tiktok:["fab","tiktok"],rednote:["fas","bookmark"],kakaotalk:["fas","comment"],map:["fas","map-location-dot"],email:["fas","envelope"],contact:["fas","headset"],etc:["fas","link"]};return($,a)=>{const c=P("font-awesome-icon");return t(),s("a",{href:p.value,target:"_blank",rel:"noopener noreferrer",class:C(["inline-flex items-center gap-2 px-3 py-2 rounded-md border transition text-sm",r.value?"bg-black text-white border-black hover:bg-neutral-800":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"])},[v(c,{icon:x.value,class:"w-4 h-4"},null,8,["icon"]),e("span",null,f(n.value),1)],10,re)}}}),ue="data:image/svg+xml,%3csvg%20width='47'%20height='33'%20viewBox='0%200%2047%2033'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M23.5%200L28.5252%205.64084L37.313%203.15122L36.6562%209.78867L45.8498%2011.4012L39.762%2016.5L45.8498%2021.5988L36.6562%2023.2113L37.313%2029.8488L28.5252%2027.3592L23.5%2033L18.4748%2027.3592L9.68705%2029.8488L10.3438%2023.2113L1.15017%2021.5988L7.238%2016.5L1.15017%2011.4012L10.3438%209.78867L9.68705%203.15122L18.4748%205.64084L23.5%200Z'%20fill='%23F66119'/%3e%3cpath%20d='M21.92%2012.6H23V21H21.992V14.016L17.72%2019.188H17.648L13.376%2014.016V21H12.392V12.6H13.496L17.708%2017.736L21.92%2012.6ZM25.4865%2017.94C25.5825%2019.596%2026.7825%2020.412%2028.5225%2020.412C29.8185%2020.412%2030.5985%2020.088%2031.3545%2019.38L32.0025%2020.064C31.1145%2020.868%2030.0225%2021.252%2028.4745%2021.252C25.9425%2021.252%2024.4905%2019.884%2024.4905%2017.736C24.4905%2015.576%2025.9425%2014.208%2028.4145%2014.208C30.7425%2014.208%2032.2305%2015.468%2032.2305%2017.724C32.2305%2017.832%2032.2185%2017.892%2032.2065%2017.94H25.4865ZM28.4265%2015.048C26.9145%2015.048%2025.7865%2015.744%2025.5345%2017.124H31.2345C30.9465%2015.672%2029.8305%2015.048%2028.4265%2015.048ZM33.4291%2012.6H34.6771L34.4731%2018.684H33.6331L33.4291%2012.6ZM34.0531%2021.12C33.6331%2021.12%2033.3331%2020.844%2033.3331%2020.46C33.3331%2020.076%2033.6331%2019.788%2034.0531%2019.788C34.4731%2019.788%2034.7731%2020.076%2034.7731%2020.46C34.7731%2020.844%2034.4731%2021.12%2034.0531%2021.12Z'%20fill='white'/%3e%3c/svg%3e",de={class:"w-full"},pe={class:"flex flex-col lg:flex-row gap-8 lg:gap-[137px]"},fe={key:0,class:"w-full lg:w-[325px] flex flex-col gap-[34px]"},xe=["onClick"],me={width:"12",height:"8",viewBox:"0 0 12 8"},he=["fill"],_e={class:"flex-1"},ge={key:0,class:"text-neutral-400 py-10 text-center border-t border-b"},ve={key:1,class:"border-2 border-[#222] p-8 min-h-[300px]"},ke={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-y-10"},ye=["src"],be=y({__name:"EventParticipantList",props:{participants:{}},setup(i){const u=i,p=B(),n=_(()=>{const a=new Map;return Array.isArray(u.participants)&&(u.participants.forEach(c=>{var b;const o=(b=c.options)==null?void 0:b[0];if(!(o!=null&&o.category)||!(o!=null&&o.code))return;const l=o.category,g=o.code;a.has(l)||a.set(l,new Map);const k=a.get(l);k.has(g)||k.set(g,[]),k.get(g).push(c)}),a.forEach(c=>{c.forEach(o=>{o.sort((l,g)=>{const k=h(l.profileId),b=h(g.profileId);return k&&!b?-1:!k&&b?1:0})})})),a}),x=_(()=>Array.from(n.value.keys())),r=T(null);F(x,a=>{!r.value&&a.length>0&&(r.value=a[0])},{immediate:!0});const m=_(()=>{if(!r.value)return[];const a=n.value.get(r.value);return a?Array.from(a.values()).flat():[]}),h=a=>{var c;return((c=p.user)==null?void 0:c.id)===a},$=a=>{if(a.length<=1)return a;if(a.length===2)return a[0]+"0";const c=Math.floor(a.length/2);return a.slice(0,c)+"0"+a.slice(c+1)};return(a,c)=>(t(),s("div",de,[c[0]||(c[0]=e("h3",{class:"text-2xl font-semibold tracking-[-1.6px] mb-[70px]"}," 참가자 명단 ",-1)),e("div",pe,[x.value.length?(t(),s("div",fe,[(t(!0),s(w,null,L(x.value,o=>(t(),s("div",{key:o,onClick:l=>r.value=o,class:C(["cursor-pointer border-2 px-6 py-4 flex items-center justify-between min-h-[64px]",r.value===o?"border-[#F66119]":"border-[#222]"])},[e("span",{class:C(["text-lg font-bold",r.value===o?"text-[#F66119]":"text-white"])},f(o),3),(t(),s("svg",me,[e("path",{d:"M6 8L0 0H12L6 8Z",fill:r.value===o?"#F66119":"#222"},null,8,he)]))],10,xe))),128))])):d("",!0),e("div",_e,[i.participants.length?r.value?(t(),s("div",ve,[e("ul",ke,[(t(!0),s(w,null,L(m.value,o=>(t(),s("li",{key:o.registrationId,class:"flex items-center gap-2 justify-center"},[h(o.profileId)?(t(),s("img",{key:0,src:I(ue),class:"w-[47px] h-[33px]"},null,8,ye)):d("",!0),e("span",{class:C(["text-[20px] lg:text-[28px] font-bold",h(o.profileId)?"text-[#F66119]":""])},f($(o.displayName)),3)]))),128))])])):d("",!0):(t(),s("div",ge," 등록된 참가자가 없습니다. "))])])]))}}),we={key:0,class:"w-full"},Le={class:"w-full bg-[#F2F1F6]"},$e={class:"max-w-[1280px] m-auto py-10 lg:py-24 px-5 lg:px-0 flex flex-col lg:flex-row gap-8 lg:gap-16"},Ce={class:"relative w-full lg:max-w-[680px] aspect-[560/351] lg:h-[427px] bg-white overflow-hidden rounded-lg flex-shrink-0"},Me=["src"],Te={key:1,class:"flex h-full items-center justify-center text-neutral-400"},Ee={class:"absolute right-[16px] top-[16px] w-[36px] h-[36px] rounded-full border-2 border-black dark:border-white overflow-hidden bg-white z-10 flex items-center justify-center"},He={class:"flex-1 flex flex-col"},Be={class:"text-[28px] lg:text-[40px] font-bold tracking-[-0.05em] leading-tight"},Fe={class:"mt-6 text-neutral-600 space-y-1 text-sm lg:text-base"},Pe={key:0},Ie={key:1,class:"pt-4 border-t border-neutral-200"},Se={class:"flex flex-wrap gap-2"},Ve={class:"max-w-[1280px] m-auto px-5 py-20"},je=["innerHTML"],Ae={key:0,class:"max-w-[1280px] m-auto px-5 py-20"},De={key:1,class:"max-w-[1280px] m-auto px-5 py-20"},Ze={key:2,class:"max-w-[1280px] m-auto px-5 py-20"},ze=["innerHTML"],Ne={class:"max-w-[1280px] m-auto px-5 py-20"},Ge=y({__name:"EventDetailView",setup(i){const u=S(),p=j();B();const n=T(null),x=T([]),r=_(()=>u.params.nameEn);let m=0;const h=async()=>{if(!r.value){p.replace({name:"error"});return}const o=++m,l=await A(r.value);if(o===m){if(!l){p.replace({name:"error"});return}n.value=l,$(l.id)}},$=async o=>{const l=await D(o);console.log("Participants loaded:",l),x.value=l};F(r,h,{immediate:!0});const a=async()=>{p.push({name:"event-apply",params:{nameEn:r.value}})},c=_(()=>{var o;return((o=n.value)==null?void 0:o.links.filter(l=>l.type!=="thumbnail"))??[]});return(o,l)=>n.value?(t(),s("div",we,[e("section",Le,[e("div",$e,[e("div",Ce,[n.value.thumbnailUrl?(t(),s("img",{key:0,src:n.value.thumbnailUrl,class:"w-full h-full object-cover"},null,8,Me)):(t(),s("div",Te," No Image ")),e("div",Ee,[v(z,{code:n.value.countryCode},null,8,["code"])])]),e("div",He,[e("h2",Be,f(n.value.title),1),e("div",Fe,[e("p",null,[l[0]||(l[0]=e("strong",null,"이벤트 기간:",-1)),M(" "+f(n.value.periodText),1)]),n.value.applyPeriodText?(t(),s("p",Pe,[l[1]||(l[1]=e("strong",null,"신청 기간:",-1)),M(" "+f(n.value.applyPeriodText),1)])):d("",!0),c.value.length?(t(),s("div",Ie,[e("ul",Se,[(t(!0),s(w,null,L(c.value,g=>(t(),s("li",{key:g.link},[v(ce,{link:g},null,8,["link"])]))),128))])])):d("",!0)]),n.value.registration_use?(t(),H(V,{key:0,class:"mt-10 lg:mt-auto w-full",size:"large",type:"primary",onClick:a},{default:E(()=>[...l[2]||(l[2]=[M(" 바로 신청하기 ",-1)])]),_:1})):d("",!0)])])]),e("section",Ve,[l[3]||(l[3]=e("h3",{class:"text-2xl font-semibold"},"이벤트 소개",-1)),n.value.contentHtml?(t(),s("div",{key:0,class:"prose max-w-none dark:prose-invert",innerHTML:n.value.contentHtml},null,8,je)):d("",!0)]),n.value.options.length?(t(),s("section",Ae,[l[4]||(l[4]=e("h3",{class:"text-2xl font-semibold"},"이벤트 옵션",-1)),v(ie,{options:n.value.options},null,8,["options"])])):d("",!0),n.value.schedules.length?(t(),s("section",De,[l[5]||(l[5]=e("h3",{class:"text-2xl font-semibold"},"이벤트 스케줄",-1)),v(K,{schedules:n.value.schedules},null,8,["schedules"])])):d("",!0),n.value.payinfoHtml?(t(),s("section",Ze,[l[6]||(l[6]=e("h3",{class:"text-2xl font-semibold"},"결제정보",-1)),e("div",{class:"prose max-w-none dark:prose-invert",innerHTML:n.value.payinfoHtml},null,8,ze)])):d("",!0),e("section",Ne,[v(be,{participants:x.value},null,8,["participants"])])])):d("",!0)}});export{Ge as default};
