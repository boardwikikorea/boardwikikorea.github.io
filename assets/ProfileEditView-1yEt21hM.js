import{d as C,c as B,n as S,b as t,a as A,t as w,o as N,u as R,q,r,g as z,x as E,f as F,m as n,e as u,A as M,i as D,D as I,G as j,z as G}from"./index-Dqv48jU8.js";import{f as T,u as H}from"./profile-D0f2oRzo.js";import{_ as J}from"./SectionTitle.vue_vue_type_script_setup_true_lang-7YAWxRxy.js";import{_ as k,B as K}from"./BaseInputAutoCountry-CIVyp_My.js";import{_ as L}from"./BaseCountryPhoneInput.vue_vue_type_script_setup_true_lang-BrBDYWRH.js";const O={class:"relative flex items-center justify-center shrink-0 w-6 h-6"},Q=["name","value","checked","disabled"],W={key:0,class:"absolute w-3 h-3 bg-[#F66119] rounded-full pointer-events-none"},X={class:"text-[20px] font-medium text-black dark:text-white leading-none"},v=C({__name:"BaseRadio",props:{modelValue:{type:[String,Number,Boolean,null]},value:{type:[String,Number,Boolean,null]},label:{},name:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:a}){const p=s,U=a,m=()=>{p.disabled||U("update:modelValue",p.value)};return(b,V)=>(N(),B("label",{class:S(["flex items-center gap-3 cursor-pointer group",{"opacity-50 cursor-not-allowed":s.disabled}])},[t("div",O,[t("input",{type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,disabled:s.disabled,onChange:m,class:"appearance-none w-full h-full border-2 border-black dark:border-white rounded-full checked:border-[#F66119] transition-all cursor-pointer"},null,40,Q),s.modelValue===s.value?(N(),B("div",W)):A("",!0)]),t("span",X,w(s.label),1)],2))}}),Y={class:"p-6"},Z={class:"max-w-[600px] mx-auto mt-10 space-y-6"},ee={class:"block text-sm font-medium mb-3"},le={class:"flex gap-6"},ae={class:"block text-sm font-medium mb-1"},ue={class:"flex gap-4"},oe={class:"w-[100px]"},ne={class:"flex-1"},te={class:"block text-sm font-medium mb-3"},se={class:"flex gap-6"},ce=C({__name:"ProfileEditView",setup(s){const{t:a}=R(),p=j(),U=G(),m=q(),b=r(!1),V=r(""),g=r(""),y=r(""),d=r(null),f=r(null),i=r(null),x=r(null),c=r(""),h=r(""),$=r(null),_=z(()=>!(!g.value.trim()||!y.value.trim()||!f.value||x.value&&!c.value||!x.value&&c.value));E(async()=>{if(!m.user)return;const o=await T(m.user.id);o&&(V.value=o.email||m.user.email||"",g.value=o.nickname,y.value=o.name,d.value=o.gender,f.value=o.nationality,i.value=o.stance,c.value=o.phone??"",h.value=o.address??"",$.value=o.address)});async function P(){if(!(!m.user||b.value||!_.value)){b.value=!0;try{const o=h.value.trim()!==""?{address:h.value,latitude:0,longitude:0}:null;await H(m.user.id,{nickname:g.value,fullName:y.value,gender:d.value,nationality:f.value,stance:i.value,contactEmail:V.value,contactPhoneCountry:x.value,contactPhone:c.value||null,region:o}),alert(a("user.profile.alert.success")),p.query.redirect&&U.push(p.query.redirect)}catch(o){console.error(o),alert(a("user.profile.alert.error"))}finally{b.value=!1}}}return F(f,o=>{x.value=o}),(o,e)=>(N(),B("div",Y,[t("div",Z,[n(J,{title:u(a)("user.profile.title.edit")},null,8,["title"]),n(k,{label:u(a)("user.profile.fields.email"),modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),readonly:""},null,8,["label","modelValue"]),n(k,{label:u(a)("user.profile.fields.nickname"),modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l)},null,8,["label","modelValue"]),n(k,{label:u(a)("user.profile.fields.fullName"),modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l)},null,8,["label","modelValue"]),t("div",null,[t("label",ee,w(u(a)("user.profile.fields.gender")),1),t("div",le,[n(v,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),value:null,label:u(a)("user.profile.gender.none"),name:"gender"},null,8,["modelValue","label"]),n(v,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l),value:"male",label:u(a)("user.profile.gender.male"),name:"gender"},null,8,["modelValue","label"]),n(v,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value=l),value:"female",label:u(a)("user.profile.gender.female"),name:"gender"},null,8,["modelValue","label"])])]),n(K,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=l=>f.value=l),label:u(a)("user.profile.fields.nationality")},null,8,["modelValue","label"]),t("div",null,[t("label",ae,w(u(a)("user.profile.fields.contact")),1),t("div",ue,[t("div",oe,[n(L,{country:x.value},null,8,["country"])]),t("div",ne,[n(k,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=l=>c.value=l),placeholder:u(a)("user.profile.placeholders.phoneNumber"),type:"phone",maxlength:11},null,8,["modelValue","placeholder"])])])]),n(k,{label:u(a)("user.profile.fields.region"),placeholder:u(a)("user.profile.placeholders.region"),modelValue:h.value,"onUpdate:modelValue":e[8]||(e[8]=l=>h.value=l)},null,8,["label","placeholder","modelValue"]),t("div",null,[t("label",te,w(u(a)("user.profile.fields.stance")),1),t("div",se,[n(v,{modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=l=>i.value=l),value:null,label:u(a)("user.profile.stance.none"),name:"stance"},null,8,["modelValue","label"]),n(v,{modelValue:i.value,"onUpdate:modelValue":e[10]||(e[10]=l=>i.value=l),value:"regular",label:u(a)("user.profile.stance.regular"),name:"stance"},null,8,["modelValue","label"]),n(v,{modelValue:i.value,"onUpdate:modelValue":e[11]||(e[11]=l=>i.value=l),value:"goofy",label:u(a)("user.profile.stance.goofy"),name:"stance"},null,8,["modelValue","label"])])]),n(I,{size:"xlarge",type:"primary",loading:b.value,disabled:!_.value,onClick:P},{default:M(()=>[D(w(u(a)("user.profile.actions.save")),1)]),_:1},8,["loading","disabled"])])]))}});export{ce as default};
