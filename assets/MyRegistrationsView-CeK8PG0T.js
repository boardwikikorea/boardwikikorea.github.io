import{d as w,u as $,r as _,g as M,x as C,c as t,o as s,a as p,t as e,e as o,b as i,F as R,h as q,i as g,m as x,A as y,D as b,O as E,z as I,P as V}from"./index-DRB21cY6.js";import{r as A,b as B,c as N}from"./eventPublicRegistration-DZiwbBQu.js";const z={class:"p-6"},P={key:0,class:"py-20 text-center"},F={key:1},L={class:"border-b pb-4 mb-4"},S={class:"font-bold text-lg"},T={class:"text-sm text-neutral-500"},j={class:"text-sm text-neutral-500"},O={class:"mb-6"},U={class:"font-bold mb-2"},W={key:0,class:"list-disc ml-5"},G={key:0},H={key:1,class:"text-neutral-400"},J={key:0,class:"pt-4 border-t"},K={key:1,class:"pt-4 border-t text-sm text-orange-600 font-semibold"},Q=w({__name:"MyEventView",props:{registrationId:{},fetcher:{type:Function}},setup(k){const{t:n}=$(),c=k,u=_(!1),l=_(null),r=_(!1),d=M(()=>l.value.registrationState==="pending"&&l.value.cancelRequested===!1),h=async()=>{u.value=!0;try{l.value=await c.fetcher(c.registrationId)}finally{u.value=!1}},f=async()=>{if(l.value){r.value=!0;try{await A(c.registrationId),await h()}finally{r.value=!1}}};return C(h),(v,m)=>(s(),t("div",z,[u.value?(s(),t("div",P,e(o(n)("user.event.my.loading")),1)):l.value?(s(),t("div",F,[i("div",L,[i("h3",S,e(l.value.event.name),1),i("p",T,e(o(n)("user.event.label.eventPeriod"))+": "+e(l.value.event.startDate)+" ~ "+e(l.value.event.endDate),1),i("p",j,e(o(n)("user.event.label.registeredAt"))+": "+e(l.value.registeredAt),1)]),i("div",O,[i("h4",U,e(o(n)("user.event.section.selectedOptions")),1),l.value.options.length?(s(),t("ul",W,[(s(!0),t(R,null,q(l.value.options,a=>(s(),t("li",{key:a.optionId},[g(e(a.optionName)+" ",1),a.musicText?(s(),t("span",G," ("+e(a.musicText)+")",1)):p("",!0)]))),128))])):(s(),t("p",H,e(o(n)("user.event.empty.options")),1))]),d.value?(s(),t("div",J,[x(b,{theme:"danger",size:"small",loading:r.value,onClick:f},{default:y(()=>[g(e(o(n)("user.event.button.requestCancel")),1)]),_:1},8,["loading"])])):l.value.cancelRequested?(s(),t("div",K,e(o(n)("user.event.notice.cancelRequested")),1)):p("",!0)])):p("",!0)]))}}),X={class:"max-w-[1280px] m-auto py-10 px-5 flex flex-col gap-8"},Y={key:0},Z={key:1},ee={key:2,class:"grid gap-6"},te={class:"w-full lg:w-[200px] aspect-[5/3] lg:h-[120px] bg-neutral-100 overflow-hidden shrink-0"},se=["src"],ne={class:"flex-1 flex flex-col justify-between"},ae={class:"text-xs font-bold px-2 py-1 bg-black text-white"},oe={key:0,class:"ml-2 text-xs font-bold px-2 py-1 bg-red-600 text-white"},le={class:"mt-2 font-bold text-lg text-neutral-900"},ie={class:"text-sm text-neutral-500"},re={class:"text-sm text-neutral-500"},ce={class:"mt-4 flex gap-2"},ve=w({__name:"MyRegistrationsView",setup(k){const{t:n}=$(),c=v=>n(`event.status.registration.${v}`),u=I(),{showModal:l}=E(),r=_(!1),d=_([]),h=async()=>{r.value=!0;try{d.value=await B()}finally{r.value=!1}},f=async v=>{const m=window.innerWidth<1024;l({title:n("user.event.my.title.detail"),type:m?"bottom":"alert",contentComponent:V(Q),contentComponentProps:{registrationId:v,fetcher:N}})};return C(h),(v,m)=>(s(),t("section",X,[r.value?(s(),t("div",Y,e(o(n)("user.event.my.loading")),1)):d.value.length?(s(),t("div",ee,[(s(!0),t(R,null,q(d.value,a=>(s(),t("article",{key:a.registrationId,class:"border-2 border-black bg-white p-5 flex flex-col lg:flex-row gap-6"},[i("div",te,[a.thumbnailUrl?(s(),t("img",{key:0,src:a.thumbnailUrl,class:"w-full h-full object-cover"},null,8,se)):p("",!0)]),i("div",ne,[i("div",null,[i("span",ae,e(c(a.registrationState)),1),a.cancelRequested?(s(),t("span",oe,e(o(n)("user.event.status.cancelRequested")),1)):p("",!0),i("h3",le,e(a.name),1),i("p",ie,e(o(n)("user.event.label.eventPeriod"))+": "+e(a.startDate)+" ~ "+e(a.endDate),1),i("p",re,e(o(n)("user.event.label.registeredAt"))+": "+e(a.registeredAt),1)]),i("div",ce,[x(b,{size:"small",onClick:D=>o(u).push({name:"event-detail",params:{nameEn:a.nameEn}})},{default:y(()=>[g(e(o(n)("user.event.button.viewEvent")),1)]),_:1},8,["onClick"]),x(b,{size:"small",onClick:D=>f(a.registrationId)},{default:y(()=>[g(e(o(n)("user.event.button.viewRegistration")),1)]),_:1},8,["onClick"])])])]))),128))])):(s(),t("div",Z,e(o(n)("user.event.my.empty")),1))]))}});export{ve as default};
