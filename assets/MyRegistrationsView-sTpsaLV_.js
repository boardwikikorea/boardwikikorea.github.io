import{d as y,u as w,r as v,g as E,x as k,c as s,a as g,t as e,e as o,b as t,F as f,h as $,i as b,m as R,A as D,D as q,o as n,O as M,z as F,P as I}from"./index-DfXFToxP.js";import{r as V,b as N,c as A}from"./eventPublicRegistration-DR-Ky7Ow.js";const B={class:"p-6"},P={key:0,class:"py-20 text-center"},T={key:1},L={class:"border-b pb-4 mb-4"},S={class:"font-bold text-lg"},j={class:"text-sm text-neutral-500"},z={class:"text-sm text-neutral-500"},O={class:"mb-6"},U={class:"font-bold mb-2"},W={key:0,class:"list-disc ml-5"},G={key:0},H={key:1,class:"text-neutral-400"},J={key:0,class:"pt-4 border-t"},K={key:1,class:"pt-4 border-t text-sm text-orange-600 font-semibold"},Q=y({__name:"MyEventView",props:{registrationId:{},fetcher:{type:Function}},setup(m){const{t:l}=w(),c=m,u=v(!1),i=v(null),r=v(!1),d=E(()=>i.value.registrationState==="pending"&&i.value.cancelRequested===!1),_=async()=>{u.value=!0;try{i.value=await c.fetcher(c.registrationId)}finally{u.value=!1}},h=async()=>{if(i.value){r.value=!0;try{await V(c.registrationId),await _()}finally{r.value=!1}}};return k(_),(p,x)=>(n(),s("div",B,[u.value?(n(),s("div",P,e(o(l)("user.event.my.loading")),1)):i.value?(n(),s("div",T,[t("div",L,[t("h3",S,e(i.value.event.name),1),t("p",j,e(o(l)("user.event.label.eventPeriod"))+": "+e(i.value.event.startDate)+" ~ "+e(i.value.event.endDate),1),t("p",z,e(o(l)("user.event.label.registeredAt"))+": "+e(i.value.registeredAt),1)]),t("div",O,[t("h4",U,e(o(l)("user.event.section.selectedOptions")),1),i.value.options.length?(n(),s("ul",W,[(n(!0),s(f,null,$(i.value.options,a=>(n(),s("li",{key:a.optionId},[b(e(a.optionName)+" ",1),a.musicText?(n(),s("span",G," ("+e(a.musicText)+")",1)):g("",!0)]))),128))])):(n(),s("p",H,e(o(l)("user.event.empty.options")),1))]),d.value?(n(),s("div",J,[R(q,{theme:"danger",size:"small",loading:r.value,onClick:h},{default:D(()=>[b(e(o(l)("user.event.button.requestCancel")),1)]),_:1},8,["loading"])])):i.value.cancelRequested?(n(),s("div",K,e(o(l)("user.event.notice.cancelRequested")),1)):g("",!0)])):g("",!0)]))}}),X={class:"max-w-[1280px] m-auto py-10 px-5 flex flex-col gap-8"},Y={key:0},Z={key:1},ee={key:2,class:"flex flex-col gap-10"},te={class:"relative w-full lg:w-[400px] h-auto lg:h-full aspect-[1.6/1] overflow-hidden bg-neutral-100 shrink-0"},se=["src"],ne={class:"absolute top-4 left-4 bg-[#222222] text-white px-[11px] py-[6px] text-[18px] font-bold leading-none flex items-center justify-center"},ae={key:1,class:"absolute top-4 right-4 bg-red-600 text-white px-[11px] py-[6px] text-xs font-bold leading-none"},le={class:"flex-1 flex flex-col pt-0 lg:pt-[39px] relative min-w-0"},oe={key:0,class:"inline-flex lg:absolute top-0 left-0 bg-[#FD7E3E] text-white px-4 h-[28px] items-center text-[20px] font-normal leading-none mb-3 lg:mb-0"},ie={key:1,class:"inline-flex lg:absolute top-0 left-0 bg-[#FD7E3E] text-white px-4 h-[28px] items-center text-[20px] font-normal leading-none mb-3 lg:mb-0"},re={class:"text-[24px] lg:text-[32px] font-bold text-black leading-[1.3] truncate lg:whitespace-normal mb-4 lg:mb-0"},ce={class:"lg:mt-[60px] text-[16px] lg:text-[18px] text-neutral-900 leading-[1.5] space-y-1"},ue={class:"mt-8 lg:mt-auto flex flex-wrap gap-2"},de=["onClick"],pe=["onClick"],ge=y({__name:"MyRegistrationsView",setup(m){const{t:l}=w(),c=p=>l(`event.status.registration.${p}`),u=F(),{showModal:i}=M(),r=v(!1),d=v([]),_=async()=>{r.value=!0;try{d.value=await N()}finally{r.value=!1}},h=async p=>{const x=window.innerWidth<1024;i({title:l("user.event.my.title.detail"),type:x?"bottom":"alert",contentComponent:I(Q),contentComponentProps:{registrationId:p,fetcher:A}})};return k(_),(p,x)=>(n(),s(f,null,[x[0]||(x[0]=t("div",{class:"w-full py-[42px] bg-[#F2F1F6]"},[t("h2",{class:"max-w-[1280px] m-auto lg:text-[40px] text-[24px] font-bold text-black"},[b(" 내가 신청한 "),t("span",{class:"text-[var(--btn-primary-bg)]"},"이벤트")])],-1)),t("section",X,[r.value?(n(),s("div",Y,e(o(l)("user.event.my.loading")),1)):d.value.length?(n(),s("div",ee,[(n(!0),s(f,null,$(d.value,a=>(n(),s("article",{key:a.registrationId,class:"flex flex-col lg:flex-row gap-8 lg:h-[250px] group"},[t("div",te,[a.thumbnailUrl?(n(),s("img",{key:0,src:a.thumbnailUrl,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},null,8,se)):g("",!0),t("div",ne,e(c(a.registrationState)),1),a.cancelRequested?(n(),s("div",ae,e(o(l)("user.event.status.cancelRequested")),1)):g("",!0)]),t("div",le,[a.eventCate?(n(),s("div",oe,e(a.eventCate),1)):(n(),s("div",ie," EVENT ")),t("h3",re,e(a.name),1),t("div",ce,[t("p",null,e(o(l)("user.event.label.eventPeriod"))+": "+e(a.startDate)+" ~ "+e(a.endDate),1),t("p",null,e(o(l)("user.event.label.registeredAt"))+": "+e(a.registeredAt),1)]),t("div",ue,[t("button",{onClick:C=>o(u).push({name:"event-detail",params:{nameEn:a.nameEn}}),class:"h-[36px] px-6 border-2 border-[#222222] bg-white hover:bg-neutral-50 text-[14px] font-bold text-black flex items-center transition-colors"},e(o(l)("user.event.button.viewEvent")),9,de),t("button",{onClick:C=>h(a.registrationId),class:"h-[36px] px-6 border-2 border-[#222222] bg-white hover:bg-neutral-50 text-[14px] font-bold text-black flex items-center transition-colors"},e(o(l)("user.event.button.viewRegistration")),9,pe)])])]))),128))])):(n(),s("div",Z,e(o(l)("user.event.my.empty")),1))])],64))}});export{ge as default};
