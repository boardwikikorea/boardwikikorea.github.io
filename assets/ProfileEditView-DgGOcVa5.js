import{d as $,c as B,n as _,b as t,a as A,t as U,o as N,u as R,q,r,g as z,x as E,m as n,e as o,A as F,i as M,D,G as I,z as j}from"./index-CzoTF383.js";import{f as G,u as T}from"./profile-Bc25CUdJ.js";import{_ as H}from"./SectionTitle.vue_vue_type_script_setup_true_lang-3KmCRfHE.js";import{_ as v,B as J}from"./BaseInputAutoCountry-BtUr81lw.js";const K={class:"relative flex items-center justify-center shrink-0 w-6 h-6"},L=["name","value","checked","disabled"],O={key:0,class:"absolute w-3 h-3 bg-[#F66119] rounded-full pointer-events-none"},Q={class:"text-[20px] font-medium text-black dark:text-white leading-none"},c=$({__name:"BaseRadio",props:{modelValue:{type:[String,Number,Boolean,null]},value:{type:[String,Number,Boolean,null]},label:{},name:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:a}){const p=s,w=a,m=()=>{p.disabled||w("update:modelValue",p.value)};return(b,V)=>(N(),B("label",{class:_(["flex items-center gap-3 cursor-pointer group",{"opacity-50 cursor-not-allowed":s.disabled}])},[t("div",K,[t("input",{type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,disabled:s.disabled,onChange:m,class:"appearance-none w-full h-full border-2 border-black dark:border-white rounded-full checked:border-[#F66119] transition-all cursor-pointer"},null,40,L),s.modelValue===s.value?(N(),B("div",O)):A("",!0)]),t("span",Q,U(s.label),1)],2))}}),W={class:"p-6"},X={class:"max-w-[600px] mx-auto mt-10 space-y-6"},Y={class:"block text-sm font-medium mb-3"},Z={class:"flex gap-6"},ee={class:"block text-sm font-medium mb-1"},le={class:"flex gap-4"},ae={class:"w-[100px]"},oe={class:"flex-1"},ue={class:"block text-sm font-medium mb-3"},ne={class:"flex gap-6"},ie=$({__name:"ProfileEditView",setup(s){const{t:a}=R(),p=I(),w=j(),m=q(),b=r(!1),V=r(""),g=r(""),y=r(""),d=r(null),h=r(null),i=r(null),x=r(null),f=r(""),k=r(""),P=r(null),C=z(()=>!(!g.value.trim()||!y.value.trim()||!h.value||x.value&&!f.value||!x.value&&f.value));E(async()=>{if(!m.user)return;const u=await G(m.user.id);u&&(V.value=u.email||m.user.email||"",g.value=u.nickname,y.value=u.name,d.value=u.gender,h.value=u.nationality,i.value=u.stance,f.value=u.phone??"",k.value=u.address??"",P.value=u.address)});async function S(){if(!(!m.user||b.value||!C.value)){b.value=!0;try{const u=k.value.trim()!==""?{address:k.value,latitude:0,longitude:0}:null;await T(m.user.id,{nickname:g.value,fullName:y.value,gender:d.value,nationality:h.value,stance:i.value,contactEmail:V.value,contactPhoneCountry:x.value,contactPhone:f.value||null,region:u}),alert(a("user.profile.alert.success")),p.query.redirect&&w.push(p.query.redirect)}catch(u){console.error(u),alert(a("user.profile.alert.error"))}finally{b.value=!1}}}return(u,e)=>(N(),B("div",W,[t("div",X,[n(H,{title:o(a)("user.profile.title.edit")},null,8,["title"]),n(v,{label:o(a)("user.profile.fields.email"),modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),readonly:""},null,8,["label","modelValue"]),n(v,{label:o(a)("user.profile.fields.nickname"),modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l)},null,8,["label","modelValue"]),n(v,{label:o(a)("user.profile.fields.fullName"),modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l)},null,8,["label","modelValue"]),t("div",null,[t("label",Y,U(o(a)("user.profile.fields.gender")),1),t("div",Z,[n(c,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),value:null,label:o(a)("user.profile.gender.none"),name:"gender"},null,8,["modelValue","label"]),n(c,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l),value:"male",label:o(a)("user.profile.gender.male"),name:"gender"},null,8,["modelValue","label"]),n(c,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value=l),value:"female",label:o(a)("user.profile.gender.female"),name:"gender"},null,8,["modelValue","label"])])]),n(J,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=l=>h.value=l),label:o(a)("user.profile.fields.nationality")},null,8,["modelValue","label"]),t("div",null,[t("label",ee,U(o(a)("user.profile.fields.contact")),1),t("div",le,[t("div",ae,[n(v,{modelValue:x.value,"onUpdate:modelValue":e[7]||(e[7]=l=>x.value=l),placeholder:o(a)("user.profile.placeholders.phoneCountry"),type:"number",maxlength:4},null,8,["modelValue","placeholder"])]),t("div",oe,[n(v,{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=l=>f.value=l),placeholder:o(a)("user.profile.placeholders.phoneNumber"),type:"phone",maxlength:11},null,8,["modelValue","placeholder"])])])]),n(v,{label:o(a)("user.profile.fields.region"),placeholder:o(a)("user.profile.placeholders.region"),modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=l=>k.value=l)},null,8,["label","placeholder","modelValue"]),t("div",null,[t("label",ue,U(o(a)("user.profile.fields.stance")),1),t("div",ne,[n(c,{modelValue:i.value,"onUpdate:modelValue":e[10]||(e[10]=l=>i.value=l),value:null,label:o(a)("user.profile.stance.none"),name:"stance"},null,8,["modelValue","label"]),n(c,{modelValue:i.value,"onUpdate:modelValue":e[11]||(e[11]=l=>i.value=l),value:"regular",label:o(a)("user.profile.stance.regular"),name:"stance"},null,8,["modelValue","label"]),n(c,{modelValue:i.value,"onUpdate:modelValue":e[12]||(e[12]=l=>i.value=l),value:"goofy",label:o(a)("user.profile.stance.goofy"),name:"stance"},null,8,["modelValue","label"])])]),n(D,{size:"xlarge",type:"primary",loading:b.value,disabled:!C.value,onClick:S},{default:F(()=>[M(U(o(a)("user.profile.actions.save")),1)]),_:1},8,["loading","disabled"])])]))}});export{ie as default};
