import{d as w,u as C,r as _,x as E,g as D,c as l,b as e,a as h,t as s,e as a,k as L,v as F,F as b,h as v,z as V,o as d,n as g}from"./index-SF3eVCzb.js";import{u as B}from"./event-dIayNW2A.js";const N={class:"p-4 md:bg-neutral-50 dark:bg-neutral-900 min-h-[calc(100vh-54px)]"},$={class:"text-lg font-semibold text-neutral-800 dark:text-neutral-100 mb-2"},z={class:"text-sm text-neutral-600 dark:text-neutral-400 mb-6"},I={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400 mb-4"},M={class:"mb-6 flex flex-col md:flex-row md:items-center gap-4 md:justify-between"},P={class:"flex flex-col md:flex-row md:items-center gap-4"},S=["placeholder"],T={class:"flex gap-2"},j=["onClick"],q={class:"overflow-x-auto bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-sm"},A={class:"w-full border-collapse"},R={class:"bg-neutral-100 dark:bg-neutral-700"},U={class:"px-4 py-3 text-xs text-center w-16"},G={class:"px-4 py-3 text-xs"},H={class:"px-4 py-3 text-xs text-center"},J={class:"px-4 py-3 text-xs text-center"},K={class:"px-4 py-3 text-xs text-center"},O={class:"px-4 py-3 text-xs text-center"},Q={class:"px-4 py-3 text-xs text-center"},W={class:"px-4 py-3 text-center text-sm text-neutral-500"},X={class:"px-4 py-3"},Y={class:"flex flex-col"},Z={class:"text-sm text-neutral-900 dark:text-neutral-100"},ee={class:"text-xs text-neutral-500 dark:text-neutral-400"},te={class:"px-4 py-3 text-center"},ne={class:"px-4 py-3 text-center"},se={class:"px-4 py-3 text-center text-sm"},ae={class:"px-4 py-3 text-center text-sm"},re={class:"px-4 py-3 text-center"},oe=["onClick"],le={key:0},de={colspan:"7",class:"px-4 py-10 text-center text-sm text-neutral-500"},pe=w({__name:"ListView",setup(ce){const{t:n}=C(),x=V(),c=B(),u=_(""),f=["all","open","closed"],i=_("all");E(async()=>{try{await c.fetchEvents()}catch(r){console.error(n("admin.event.alert.listError"),r)}});const p=D(()=>{let r=c.events;i.value==="open"?r=r.filter(t=>t.open):i.value==="closed"&&(r=r.filter(t=>!t.open));const o=u.value.trim().toLowerCase();return o&&(r=r.filter(t=>t.name.toLowerCase().includes(o)||(t.name_en??"").toLowerCase().includes(o))),r});async function k(){if(confirm(n("admin.event.confirm.create")))try{const r=n("admin.event.draft.defaultName"),o=await c.createDraftEvent(r);x.push({name:"admin-event-edit",params:{eventId:o}})}catch(r){alert(n("admin.event.confirm.noPermission")),console.error(r)}}function y(r){x.push({name:"admin-event-edit",params:{eventId:r}})}return(r,o)=>(d(),l("main",N,[e("h3",$,s(a(n)("admin.event.listTitle")),1),e("p",z,s(a(n)("admin.event.listDescription")),1),a(c).loading?(d(),l("div",I,s(a(n)("admin.event.listLoading")),1)):h("",!0),e("div",M,[e("div",P,[L(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>u.value=t),type:"text",placeholder:a(n)("admin.event.searchPlaceholder"),class:"w-full md:w-64 px-3 py-2 text-sm rounded-md border border-neutral-300 bg-white focus:outline-none focus:ring-2 focus:ring-neutral-400 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-600"},null,8,S),[[F,u.value]]),e("div",T,[(d(),l(b,null,v(f,t=>e("button",{key:t,onClick:m=>i.value=t,class:g(["px-3 py-1.5 text-sm rounded-full border transition",i.value===t?"bg-neutral-900 text-white border-neutral-900 dark:bg-white dark:text-neutral-900":"bg-white text-neutral-700 border-neutral-300 hover:bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-200 dark:border-neutral-600 dark:hover:bg-neutral-700"])},s(a(n)(`event.filter.${t}`)),11,j)),64))])]),e("button",{onClick:k,class:"w-full md:w-auto px-4 py-2 text-sm rounded-md bg-neutral-900 text-white hover:bg-neutral-800 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-200"},s(a(n)("admin.event.button.create")),1)]),e("div",q,[e("table",A,[e("thead",R,[e("tr",null,[e("th",U,s(a(n)("event.table.num")),1),e("th",G,s(a(n)("event.table.name")),1),e("th",H,s(a(n)("event.table.country")),1),e("th",J,s(a(n)("event.table.open")),1),e("th",K,s(a(n)("event.table.startDate")),1),e("th",O,s(a(n)("event.table.endDate")),1),e("th",Q,s(a(n)("event.table.manage")),1)])]),e("tbody",null,[(d(!0),l(b,null,v(p.value,(t,m)=>(d(),l("tr",{key:t.id,class:"border-t border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-700"},[e("td",W,s(m+1),1),e("td",X,[e("div",Y,[e("span",Z,s(t.name),1),e("span",ee,s(t.name_en??"draft"),1)])]),e("td",te,s(t.country_code??"-"),1),e("td",ne,[e("span",{class:g(["inline-flex px-2 py-1 text-xs rounded-full",t.open?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200":"bg-neutral-200 text-neutral-600 dark:bg-neutral-600 dark:text-neutral-200"])},s(t.open?a(n)("event.status.open"):a(n)("event.status.closed")),3)]),e("td",se,s(t.start_date??"-"),1),e("td",ae,s(t.end_date??"-"),1),e("td",re,[e("button",{onClick:ie=>y(t.id),class:"px-3 py-1 text-xs rounded-md bg-neutral-200 hover:bg-neutral-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 dark:text-neutral-200"},s(a(n)("admin.event.button.edit")),9,oe)])]))),128)),!a(c).loading&&p.value.length===0?(d(),l("tr",le,[e("td",de,s(a(n)("admin.event.empty")),1)])):h("",!0)])])])]))}});export{pe as default};
