import{d as M,u as N,g as a,n as P,j as C,c as E,e as k,a as e,J as o,K as n,L as V,w as R,b as S,B as q,P as A,M as T,o as j}from"./index-CD9bOLTa.js";import{f as z,u as D}from"./profile-BHNbK1T1.js";import{_ as F}from"./SectionTitle.vue_vue_type_script_setup_true_lang-B72YI1H0.js";const J={class:"p-6"},K={class:"max-w-[600px] mx-auto mt-10 space-y-6"},L={class:"flex gap-2"},O=M({__name:"ProfileEditView",setup($){const g=A(),c=T(),r=N(),f=a(!1),b=a(""),d=a(""),i=a(""),y=a(null),m=a(null),x=a(null),v=a(null),s=a(""),p=a(""),U=a(null),w=P(()=>!(!d.value.trim()||!i.value.trim()||!m.value||v.value&&!s.value||!v.value&&s.value));C(async()=>{if(!r.user)return;const t=await z(r.user.id);t&&(b.value=t.email||r.user.email||"",d.value=t.nickname,i.value=t.name,y.value=t.gender,m.value=t.nationality,x.value=t.stance,s.value=t.phone??"",p.value=t.address??"",U.value=t.address)});async function B(){if(!(!r.user||f.value||!w.value)){f.value=!0;try{const t=p.value.trim()!==""?{address:p.value,latitude:0,longitude:0}:null;await D(r.user.id,{nickname:d.value,fullName:i.value,gender:y.value,nationality:m.value,stance:x.value,contactEmail:b.value,contactPhoneCountry:v.value,contactPhone:s.value||null,region:t}),alert("정상적으로 수정되었습니다."),g.query.redirect&&c.push(g.query.redirect)}catch(t){console.error(t),alert("수정 중 오류가 발생했습니다.")}finally{f.value=!1}}}return(t,l)=>(j(),E("div",J,[k(F,{title:"회원정보 수정"}),e("div",K,[e("div",null,[l[9]||(l[9]=e("label",{class:"block text-sm font-medium mb-1"},"이메일",-1)),o(e("input",{"onUpdate:modelValue":l[0]||(l[0]=u=>b.value=u),type:"email",readonly:"",class:"w-full border rounded px-3 py-2 bg-gray-100"},null,512),[[n,b.value]])]),e("div",null,[l[10]||(l[10]=e("label",{class:"block text-sm font-medium mb-1"},"닉네임",-1)),o(e("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>d.value=u),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[n,d.value]])]),e("div",null,[l[11]||(l[11]=e("label",{class:"block text-sm font-medium mb-1"},"이름",-1)),o(e("input",{"onUpdate:modelValue":l[2]||(l[2]=u=>i.value=u),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[n,i.value]])]),e("div",null,[l[13]||(l[13]=e("label",{class:"block text-sm font-medium mb-1"},"성별",-1)),o(e("select",{"onUpdate:modelValue":l[3]||(l[3]=u=>y.value=u),class:"w-full border rounded px-3 py-2"},[...l[12]||(l[12]=[e("option",{value:null},"선택 안함",-1),e("option",{value:"male"},"남성",-1),e("option",{value:"female"},"여성",-1)])],512),[[V,y.value]])]),e("div",null,[l[14]||(l[14]=e("label",{class:"block text-sm font-medium mb-1"},"국적",-1)),o(e("input",{"onUpdate:modelValue":l[4]||(l[4]=u=>m.value=u),type:"text",class:"w-full border rounded px-3 py-2"},null,512),[[n,m.value]])]),e("div",null,[l[15]||(l[15]=e("label",{class:"block text-sm font-medium mb-1"},"연락처",-1)),e("div",L,[o(e("input",{"onUpdate:modelValue":l[5]||(l[5]=u=>v.value=u),placeholder:"+82",class:"w-20 border rounded px-2 py-2"},null,512),[[n,v.value]]),o(e("input",{"onUpdate:modelValue":l[6]||(l[6]=u=>s.value=u),placeholder:"01012345678",class:"flex-1 border rounded px-3 py-2"},null,512),[[n,s.value]])])]),e("div",null,[l[16]||(l[16]=e("label",{class:"block text-sm font-medium mb-1"},"활동 지역",-1)),o(e("input",{"onUpdate:modelValue":l[7]||(l[7]=u=>p.value=u),placeholder:"예: 서울, 부산",class:"w-full border rounded px-3 py-2"},null,512),[[n,p.value]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"block text-sm font-medium mb-1"},"스탠스",-1)),o(e("select",{"onUpdate:modelValue":l[8]||(l[8]=u=>x.value=u),class:"w-full border rounded px-3 py-2"},[...l[17]||(l[17]=[e("option",{value:null},"선택 안함",-1),e("option",{value:"regular"},"레귤러",-1),e("option",{value:"goofy"},"구피",-1)])],512),[[V,x.value]])]),k(q,{size:"xlarge",type:"primary",loading:f.value,disabled:!w.value,onClick:B},{default:R(()=>[...l[19]||(l[19]=[S(" 회원정보 수정 ",-1)])]),_:1},8,["loading","disabled"])])]))}});export{O as default};
