import{d as C,c as w,y as $,a,f as P,t as S,o as U,u as R,h as o,i as A,j as E,e as n,w as F,b as M,B as j,C as q,n as z}from"./index-DE-Cvn-3.js";import{f as D,u as I}from"./profile-ZugmLu24.js";import{_ as T}from"./SectionTitle.vue_vue_type_script_setup_true_lang-DeV8ZuHY.js";import{_ as f,B as G}from"./BaseInputAutoCountry-6MZN5xqv.js";const H={class:"relative flex items-center justify-center shrink-0 w-6 h-6"},J=["name","value","checked","disabled"],K={key:0,class:"absolute w-3 h-3 bg-[#F66119] rounded-full pointer-events-none"},L={class:"text-[20px] font-medium text-black dark:text-white leading-none"},p=C({__name:"BaseRadio",props:{modelValue:{type:[String,Number,Boolean,null]},value:{type:[String,Number,Boolean,null]},label:{},name:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:x}){const k=t,i=x,r=()=>{k.disabled||i("update:modelValue",k.value)};return(V,m)=>(U(),w("label",{class:$(["flex items-center gap-3 cursor-pointer group",{"opacity-50 cursor-not-allowed":t.disabled}])},[a("div",H,[a("input",{type:"radio",name:t.name,value:t.value,checked:t.modelValue===t.value,disabled:t.disabled,onChange:r,class:"appearance-none w-full h-full border-2 border-black dark:border-white rounded-full checked:border-[#F66119] transition-all cursor-pointer"},null,40,J),t.modelValue===t.value?(U(),w("div",K)):P("",!0)]),a("span",L,S(t.label),1)],2))}}),O={class:"p-6"},Q={class:"max-w-[600px] mx-auto mt-10 space-y-6"},W={class:"flex gap-6"},X={class:"flex gap-4"},Y={class:"w-[100px]"},Z={class:"flex-1"},_={class:"flex gap-6"},ee={class:"pt-5"},te=C({__name:"ProfileEditView",setup(t){const x=q(),k=z(),i=R(),r=o(!1),V=o(""),m=o(""),c=o(""),d=o(null),b=o(null),s=o(null),g=o(null),v=o(""),y=o(""),h=o(null),B=A(()=>!(!m.value.trim()||!c.value.trim()||!b.value||g.value&&!v.value||!g.value&&v.value));E(async()=>{if(!i.user)return;const u=await D(i.user.id);u&&(V.value=u.email||i.user.email||"",m.value=u.nickname,c.value=u.name,d.value=u.gender,b.value=u.nationality,s.value=u.stance,v.value=u.phone??"",y.value=u.address??"",h.value=u.address)});async function N(){if(!(!i.user||r.value||!B.value)){r.value=!0;try{const u=y.value.trim()!==""?{address:y.value,latitude:0,longitude:0}:null;await I(i.user.id,{nickname:m.value,fullName:c.value,gender:d.value,nationality:b.value,stance:s.value,contactEmail:V.value,contactPhoneCountry:g.value,contactPhone:v.value||null,region:u}),alert("정상적으로 수정되었습니다."),x.query.redirect&&k.push(x.query.redirect)}catch(u){console.error(u),alert("수정 중 오류가 발생했습니다.")}finally{r.value=!1}}}return(u,e)=>(U(),w("div",O,[a("div",Q,[n(T,{title:"회원정보 수정"}),a("div",null,[n(f,{label:"이메일",modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),readonly:""},null,8,["modelValue"])]),a("div",null,[n(f,{label:"닉네임",modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=l=>m.value=l)},null,8,["modelValue"])]),a("div",null,[n(f,{label:"이름",modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l)},null,8,["modelValue"])]),a("div",null,[e[13]||(e[13]=a("label",{class:"block text-sm font-medium mb-3"},"성별",-1)),a("div",W,[n(p,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),value:null,label:"선택 안함",name:"gender"},null,8,["modelValue"]),n(p,{modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=l=>d.value=l),value:"male",label:"남성",name:"gender"},null,8,["modelValue"]),n(p,{modelValue:d.value,"onUpdate:modelValue":e[5]||(e[5]=l=>d.value=l),value:"female",label:"여성",name:"gender"},null,8,["modelValue"])])]),a("div",null,[n(G,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=l=>b.value=l),label:"국적"},null,8,["modelValue"])]),a("div",null,[e[14]||(e[14]=a("label",{class:"block text-sm font-medium mb-1"},"연락처",-1)),a("div",X,[a("div",Y,[n(f,{modelValue:g.value,"onUpdate:modelValue":e[7]||(e[7]=l=>g.value=l),placeholder:"+82",type:"number",maxlength:4},null,8,["modelValue"])]),a("div",Z,[n(f,{modelValue:v.value,"onUpdate:modelValue":e[8]||(e[8]=l=>v.value=l),placeholder:"01012345678",type:"phone",maxlength:11},null,8,["modelValue"])])])]),a("div",null,[n(f,{label:"활동 지역",placeholder:"예: 서울, 부산",modelValue:y.value,"onUpdate:modelValue":e[9]||(e[9]=l=>y.value=l)},null,8,["modelValue"])]),a("div",null,[e[15]||(e[15]=a("label",{class:"block text-sm font-medium mb-3"},"스탠스",-1)),a("div",_,[n(p,{modelValue:s.value,"onUpdate:modelValue":e[10]||(e[10]=l=>s.value=l),value:null,label:"선택 안함",name:"stance"},null,8,["modelValue"]),n(p,{modelValue:s.value,"onUpdate:modelValue":e[11]||(e[11]=l=>s.value=l),value:"regular",label:"레귤러",name:"stance"},null,8,["modelValue"]),n(p,{modelValue:s.value,"onUpdate:modelValue":e[12]||(e[12]=l=>s.value=l),value:"goofy",label:"구피",name:"stance"},null,8,["modelValue"])])]),a("div",ee,[n(j,{size:"xlarge",type:"primary",loading:r.value,disabled:!B.value,onClick:N},{default:F(()=>[...e[16]||(e[16]=[M(" 회원정보 수정 ",-1)])]),_:1},8,["loading","disabled"])])])]))}});export{te as default};
