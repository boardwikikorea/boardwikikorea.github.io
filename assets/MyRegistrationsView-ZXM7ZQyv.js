import{d as y,u as w,r as v,g as R,x as k,c as s,a as g,t as e,e as l,b as t,F as f,h as $,i as b,m as E,A as D,D as q,o as n,Q as M,z as F,R as I}from"./index-1UsboSlJ.js";import{r as V,b as N,c as A}from"./eventPublicRegistration-BWUUSC0D.js";const B={class:"p-6"},T={key:0,class:"py-20 text-center"},L={key:1},P={class:"border-b pb-4 mb-4"},S={class:"font-bold text-lg"},j={class:"text-sm text-neutral-500"},z={class:"text-sm text-neutral-500"},U={class:"mb-6"},O={class:"font-bold mb-2"},Q={key:0,class:"list-disc ml-5"},W={key:0},G={key:1,class:"text-neutral-400"},H={key:0,class:"pt-4 border-t"},J={key:1,class:"pt-4 border-t text-sm text-orange-600 font-semibold"},K=y({__name:"MyEventView",props:{registrationId:{},fetcher:{type:Function}},setup(m){const{t:a}=w(),c=m,d=v(!1),i=v(null),r=v(!1),u=R(()=>i.value.registrationState==="pending"&&i.value.cancelRequested===!1),_=async()=>{d.value=!0;try{i.value=await c.fetcher(c.registrationId)}finally{d.value=!1}},h=async()=>{if(i.value){r.value=!0;try{await V(c.registrationId),await _()}finally{r.value=!1}}};return k(_),(p,x)=>(n(),s("div",B,[d.value?(n(),s("div",T,e(l(a)("user.event.my.loading")),1)):i.value?(n(),s("div",L,[t("div",P,[t("h3",S,e(i.value.event.name),1),t("p",j,e(l(a)("user.event.label.eventPeriod"))+": "+e(i.value.event.startDate)+" ~ "+e(i.value.event.endDate),1),t("p",z,e(l(a)("user.event.label.registeredAt"))+": "+e(i.value.registeredAt),1)]),t("div",U,[t("h4",O,e(l(a)("user.event.section.selectedOptions")),1),i.value.options.length?(n(),s("ul",Q,[(n(!0),s(f,null,$(i.value.options,o=>(n(),s("li",{key:o.optionId},[b(e(o.optionName)+" ",1),o.musicText?(n(),s("span",W," ("+e(o.musicText)+")",1)):g("",!0)]))),128))])):(n(),s("p",G,e(l(a)("user.event.empty.options")),1))]),u.value?(n(),s("div",H,[E(q,{theme:"danger",size:"small",loading:r.value,onClick:h},{default:D(()=>[b(e(l(a)("user.event.button.requestCancel")),1)]),_:1},8,["loading"])])):i.value.cancelRequested?(n(),s("div",J,e(l(a)("user.event.notice.cancelRequested")),1)):g("",!0)])):g("",!0)]))}}),X={class:"max-w-[1280px] m-auto py-10 px-5 flex flex-col gap-8"},Y={key:0},Z={key:1},ee={key:2,class:"flex flex-col gap-10"},te={class:"relative w-full lg:w-[400px] h-auto lg:h-full aspect-[1.6/1] overflow-hidden bg-neutral-100 shrink-0"},se=["src"],ne={class:"absolute top-4 left-4 bg-[#222222] text-white px-[11px] py-[6px] text-[18px] font-bold leading-none flex items-center justify-center"},oe={key:1,class:"absolute top-4 right-4 bg-red-600 text-white px-[11px] py-[6px] text-xs font-bold leading-none"},ae={class:"flex-1 flex flex-col pt-0 lg:pt-[39px] relative min-w-0"},le={key:0,class:"inline-flex lg:absolute top-0 left-0 bg-[#FD7E3E] text-white px-4 h-[28px] items-center text-[20px] font-normal leading-none mb-3 lg:mb-0"},ie={key:1,class:"inline-flex lg:absolute top-0 left-0 bg-[#FD7E3E] text-white px-4 h-[28px] items-center text-[20px] font-normal leading-none mb-3 lg:mb-0"},re={class:"text-[24px] lg:text-[32px] font-bold text-foreground leading-[1.3] truncate lg:whitespace-normal mb-4 lg:mb-0"},ce={class:"lg:mt-[60px] text-[16px] lg:text-[18px] text-muted-foreground leading-[1.5] space-y-1"},de={class:"mt-8 lg:mt-auto flex flex-wrap gap-2"},ue=["onClick"],pe=["onClick"],ge=y({__name:"MyRegistrationsView",setup(m){const{t:a}=w(),c=p=>a(`event.status.registration.${p}`),d=F(),{showModal:i}=M(),r=v(!1),u=v([]),_=async()=>{r.value=!0;try{u.value=await N()}finally{r.value=!1}},h=async p=>{const x=window.innerWidth<1024;i({title:a("user.event.my.title.detail"),type:x?"bottom":"alert",contentComponent:I(K),contentComponentProps:{registrationId:p,fetcher:A}})};return k(_),(p,x)=>(n(),s(f,null,[x[0]||(x[0]=t("div",{class:"w-full py-[28px] px-[20px] md:py-[38px] md:px-[25px] bg-[#F2F1F6]"},[t("h2",{class:"max-w-[1280px] m-auto lg:text-[40px] text-[24px] font-bold text-black"},[b(" 내가 신청한 "),t("span",{class:"text-[var(--btn-primary-bg)]"},"이벤트")])],-1)),t("section",X,[r.value?(n(),s("div",Y,e(l(a)("user.event.my.loading")),1)):u.value.length?(n(),s("div",ee,[(n(!0),s(f,null,$(u.value,o=>(n(),s("article",{key:o.registrationId,class:"flex flex-col lg:flex-row gap-8 lg:h-[250px] group"},[t("div",te,[o.thumbnailUrl?(n(),s("img",{key:0,src:o.thumbnailUrl,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},null,8,se)):g("",!0),t("div",ne,e(c(o.registrationState)),1),o.cancelRequested?(n(),s("div",oe,e(l(a)("user.event.status.cancelRequested")),1)):g("",!0)]),t("div",ae,[o.eventCate?(n(),s("div",le,e(o.eventCate),1)):(n(),s("div",ie," EVENT ")),t("h3",re,e(o.name),1),t("div",ce,[t("p",null,e(l(a)("user.event.label.eventPeriod"))+": "+e(o.startDate)+" ~ "+e(o.endDate),1),t("p",null,e(l(a)("user.event.label.registeredAt"))+": "+e(o.registeredAt),1)]),t("div",de,[t("button",{onClick:C=>l(d).push({name:"event-detail",params:{nameEn:o.nameEn}}),class:"h-[36px] px-6 border-2 border-[#222222] bg-white hover:bg-neutral-50 text-[14px] font-bold text-black flex items-center transition-colors"},e(l(a)("user.event.button.viewEvent")),9,ue),t("button",{onClick:C=>h(o.registrationId),class:"h-[36px] px-6 border-2 border-[#222222] bg-white hover:bg-neutral-50 text-[14px] font-bold text-black flex items-center transition-colors"},e(l(a)("user.event.button.viewRegistration")),9,pe)])])]))),128))])):(n(),s("div",Z,e(l(a)("user.event.my.empty")),1))])],64))}});export{ge as default};
