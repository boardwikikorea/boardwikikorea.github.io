import{d as U,c as y,o as V,z as S,a as n,f as M,t as R,n as E,g as v,i as z,e as d,M as x,b as k,F as P,r as I,N as A,u as D,j,w as L,B as O,I as J,J as T}from"./index-ublk6XVv.js";import{f as _,u as G}from"./profile-ei7ANgtl.js";import{_ as H}from"./SectionTitle.vue_vue_type_script_setup_true_lang-CR54PZ3s.js";const K={class:"relative flex items-center justify-center shrink-0 w-6 h-6"},Q=["name","value","checked","disabled"],W={key:0,class:"absolute w-3 h-3 bg-[#F66119] rounded-full pointer-events-none"},X={class:"text-[20px] font-medium text-black dark:text-white leading-none"},q=U({__name:"BaseRadio",props:{modelValue:{type:[String,Number,Boolean,null]},value:{type:[String,Number,Boolean,null]},label:{},name:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:g}){const p=s,i=g,a=()=>{p.disabled||i("update:modelValue",p.value)};return(b,f)=>(V(),y("label",{class:S(["flex items-center gap-3 cursor-pointer group",{"opacity-50 cursor-not-allowed":s.disabled}])},[n("div",K,[n("input",{type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,disabled:s.disabled,onChange:a,class:"appearance-none w-full h-full border-2 border-black dark:border-white rounded-full checked:border-[#F66119] transition-all cursor-pointer"},null,40,Q),s.modelValue===s.value?(V(),y("div",W)):M("",!0)]),n("span",X,R(s.label),1)],2))}}),Y={class:"flex flex-col gap-10 w-full w-full"},Z={class:"flex flex-col gap-4"},ee={class:"flex flex-row gap-8"},le={class:"flex flex-col gap-4"},ae={class:"flex items-center gap-[16px] md:gap-[32px]"},te={class:"flex-1 max-w-[192px]"},ne={class:"flex-1 max-w-[192px]"},ue={class:"flex-1 max-w-[192px]"},se={class:"flex flex-col gap-4"},oe={class:"flex flex-col gap-4"},de={class:"flex flex-row gap-8"},ie=U({__name:"UserForm",props:{modelValue:{},isEdit:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:g}){const p=s,i=g,a=E({get:()=>p.modelValue,set:u=>i("update:modelValue",u)}),b=[{value:"male",label:"남성"},{value:"female",label:"여성"}],f=[{value:null,label:"선택안함"},{value:"regular",label:"레귤러"},{value:"goofy",label:"구피"}],r=(u,e)=>{i("update:modelValue",{...p.modelValue,[u]:e})},c=v(""),t=v(""),o=v(""),B=v(null),F=v(null),$=v(null);z(()=>{var u;return(u=p.modelValue)==null?void 0:u.phone},u=>{const e=(u||"").replace(/[^0-9]/g,""),l=c.value+t.value+o.value;if(e===l)return;const h=e.length===10?6:7;c.value=e.substring(0,3),t.value=e.substring(3,h),o.value=e.substring(h,11)},{immediate:!0});const w=(u,e)=>{var N,C;const l=e.target;if(!l)return;const m=l.value.replace(/[^0-9]/g,"");u===1?c.value=m:u===2?t.value=m:u===3&&(o.value=m);const h=c.value+t.value+o.value;r("phone",h),m.length>=l.maxLength&&(u===1?(N=F.value)==null||N.focus():u===2&&((C=$.value)==null||C.focus()))};return(u,e)=>(V(),y("div",Y,[d(x,{label:"이름","model-value":a.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>r("name",l)),placeholder:"실명을 입력해 주세요",required:""},null,8,["model-value"]),d(x,{label:"닉네임","model-value":a.value.nickname,"onUpdate:modelValue":e[1]||(e[1]=l=>r("nickname",l)),placeholder:"사용하실 닉네임을 입력해 주세요",required:""},null,8,["model-value"]),n("div",Z,[e[13]||(e[13]=n("label",{class:"text-sm font-medium text-neutral-800 dark:text-neutral-200"},[k(" 성별 "),n("span",{class:"text-[#3B4BFB] dark:text-neutral-400"},"*")],-1)),n("div",ee,[(V(),y(P,null,I(b,l=>d(q,{key:l.value||"none",name:"gender",label:l.label,value:l.value,"model-value":a.value.gender,"onUpdate:modelValue":e[2]||(e[2]=m=>r("gender",m))},null,8,["label","value","model-value"])),64))])]),d(x,{label:"이메일",type:"email","model-value":a.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>r("email",l)),placeholder:"example@email.com",disabled:s.isEdit,required:""},null,8,["model-value","disabled"]),n("div",le,[e[16]||(e[16]=n("label",{class:"text-sm font-medium text-neutral-800 dark:text-neutral-200"},[k(" 휴대폰 번호 "),n("span",{class:"text-[#3B4BFB] dark:text-neutral-400"},"*")],-1)),n("div",ae,[n("div",te,[d(x,{ref_key:"input1",ref:B,modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),type:"phone","text-align":"center",maxlength:3,placeholder:"010",onInput:e[5]||(e[5]=l=>w(1,l))},null,8,["modelValue"])]),e[14]||(e[14]=n("div",{class:"w-4 h-[2px] bg-[#222222] dark:bg-neutral-500 flex-shrink-0"},null,-1)),n("div",ne,[d(x,{ref_key:"input2",ref:F,modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value=l),type:"phone","text-align":"center",maxlength:4,placeholder:"1234",onInput:e[7]||(e[7]=l=>w(2,l))},null,8,["modelValue"])]),e[15]||(e[15]=n("div",{class:"w-4 h-[2px] bg-[#222222] dark:bg-neutral-500 flex-shrink-0"},null,-1)),n("div",ue,[d(x,{ref_key:"input3",ref:$,modelValue:o.value,"onUpdate:modelValue":e[8]||(e[8]=l=>o.value=l),type:"phone","text-align":"center",maxlength:4,placeholder:"5678",onInput:e[9]||(e[9]=l=>w(3,l))},null,8,["modelValue"])])])]),n("div",se,[e[17]||(e[17]=n("label",{class:"text-sm font-medium text-neutral-800 dark:text-neutral-200"},[k(" 국적 "),n("span",{class:"text-[#3B4BFB] dark:text-neutral-400"},"*")],-1)),d(A,{modelValue:a.value.nationality,"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.nationality=l),"label-show":!1,placeholder:"국가를 선택해 주세요"},null,8,["modelValue"])]),d(x,{label:"활동지역","model-value":a.value.address,"onUpdate:modelValue":e[11]||(e[11]=l=>r("address",l)),placeholder:"주소를 입력해 주세요"},null,8,["model-value"]),n("div",oe,[e[18]||(e[18]=n("label",{class:"text-sm font-medium text-neutral-800 dark:text-neutral-200"},[k(" 스탠스 "),n("span",{class:"text-[#3B4BFB] dark:text-neutral-400"},"*")],-1)),n("div",de,[(V(),y(P,null,I(f,l=>d(q,{key:l.value||"none",name:"stance",label:l.label,value:l.value,"model-value":a.value.stance,"onUpdate:modelValue":e[12]||(e[12]=m=>r("stance",m))},null,8,["label","value","model-value"])),64))])])]))}}),re={class:"p-6"},me={class:"flex flex-col items-center gap-10 mt-10 pb-20 max-w-[600px] m-auto"},fe=U({__name:"ProfileEditView",setup(s){const g=J(),p=T(),i=D(),a=v({name:"",nickname:"",gender:null,email:"",phone:"",nationality:"",stance:null,address:""}),b=v(null),f=v(!1),r=E(()=>a.value.name.trim()!==""&&a.value.nickname.trim()!==""&&a.value.gender!==null&&a.value.phone.length>=10&&a.value.nationality!==null&&a.value.nationality.trim()!=="");j(async()=>{var o;if(!i.user)return;const t=await _(i.user.id);t&&(b.value=t.region,a.value={name:t.fullName||"",nickname:t.nickname||"",gender:t.gender==="male"||t.gender==="female"?t.gender:null,email:t.email||i.user.email||"",phone:t.mobile||"",nationality:t.nationality||"",stance:t.stance||null,address:((o=t.region)==null?void 0:o.address)||""})});const c=async()=>{if(!(!i.user||f.value||!r.value)){f.value=!0;try{const t=b.value?{...b.value,address:a.value.address}:a.value.address?{address:a.value.address,latitude:0,longitude:0}:null;await G(i.user.id,{fullName:a.value.name,nickname:a.value.nickname,gender:a.value.gender,nationality:a.value.nationality,stance:a.value.stance,mobile:a.value.phone,email:a.value.email,region:t}),alert("정상적으로 수정되었습니다."),g.query.redirect&&p.push(g.query.redirect)}catch(t){console.error(t),alert("수정 중 오류가 발생했습니다.")}finally{f.value=!1}}};return(t,o)=>(V(),y("div",re,[d(H,{title:"회원정보 수정"}),n("div",me,[d(ie,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=B=>a.value=B),"is-edit":!0},null,8,["modelValue"]),d(O,{size:"xlarge",type:"primary",loading:f.value,disabled:!r.value,onClick:c},{default:L(()=>[...o[1]||(o[1]=[k(" 회원정보 수정 ",-1)])]),_:1},8,["loading","disabled"])])]))}});export{fe as default};
