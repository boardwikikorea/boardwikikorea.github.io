import{d as G,c as u,l as P,i as e,t as o,n as q,o as r,q as de,r as _,x as ie,h as F,g as R,y as re,z as ue,A as me,B as ce,C as E,F as L,p as N,D as ve,T as pe,E as H,j as b,G as _e,H as be,k as A,I as xe,J as le,_ as fe,e as W,a as l,K as he,v as h,L as ae,M as ge,u as ke,N as ye,O as ne,P as we,Q as K,m as Ve,R as Q}from"./index-02wV1OGF.js";import{u as $e}from"./event-DKVeAhom.js";const Ce={class:"flex items-center gap-3"},Ee={key:0,class:"text-sm text-neutral-700 dark:text-neutral-300"},Ue=["disabled"],Y=G({__name:"ToggleSwitch",props:{modelValue:{type:Boolean},label:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(y,{emit:d}){const s=y,x=d;function w(){s.disabled||x("update:modelValue",!s.modelValue)}return($,p)=>(r(),u("div",Ce,[y.label?(r(),u("span",Ee,o(y.label),1)):P("",!0),e("button",{type:"button",onClick:w,disabled:y.disabled,class:q(["relative w-14 h-7 rounded-full flex items-center transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",y.modelValue?"bg-neutral-900 dark:bg-white":"bg-neutral-300 dark:bg-neutral-700"])},[e("span",{class:q(["absolute w-6 h-6 rounded-full shadow-md transition-all duration-300",y.modelValue?"translate-x-7 bg-white dark:bg-neutral-900":"translate-x-1 bg-white"])},null,2)],10,Ue)]))}}),Z=de(new Set);function Se(){return{registerCloser:x=>{Z.add(x)},unregisterCloser:x=>{Z.delete(x)},closeAllDropdowns:()=>{Z.forEach(x=>{x()})}}}const Be=["disabled"],Te={class:"font-bold text-blue-600 dark:text-blue-400"},Re={class:"ml-0.5 text-neutral-500"},Oe={class:"list-none m-0 p-0 divide-y divide-neutral-100 dark:divide-neutral-700"},Pe=["onClick"],De={class:"px-3 py-2.5 text-sm w-full block truncate"},Me={class:"font-bold text-blue-600 dark:text-blue-400"},Ne={class:"ml-0.5 text-neutral-500"},Le=G({__name:"BaseSelectBox",props:{modelValue:{default:null},options:{default:()=>[]},label:{default:""},name:{},placeholder:{default:""},disabled:{type:Boolean,default:!1},labelShow:{type:Boolean,default:!0},selectId:{default:null},isFixed:{type:Boolean,default:!1},type:{default:"default"}},emits:["update:modelValue","blur","toggle","change"],setup(y,{expose:d,emit:s}){const x=y,w=s,{registerCloser:$,unregisterCloser:p}=Se(),m=_(x.modelValue),U=_(!1),g=_(!1),C=_(null),k=_(null),S=_(null),a=_(!1);ie(C,()=>{g.value=!1}),F(()=>x.modelValue,f=>{m.value=f}),F(g,f=>{f&&le(()=>{const T=k.value,D=S.value;T&&(D&&m.value!==null&&m.value!==""?D.scrollIntoView({block:"nearest",behavior:"smooth"}):T.scrollTop=0)})}),F(m,f=>{w("update:modelValue",f)});const M=R(()=>m.value===null||m.value===""?null:x.options.find(f=>String(f.value)===String(m.value))||null),B=R(()=>M.value?M.value.label:x.placeholder),c=_({}),v=()=>{if(!C.value||!k.value)return;const f=C.value.getBoundingClientRect(),T=window.innerHeight,D=k.value.offsetHeight,z=5,O=10,i=10,t=window.scrollY||window.pageYOffset,n=window.scrollX||window.pageXOffset;let V,j;const oe=T-f.bottom;if(U.value=oe<D+z,j=f.left+n,U.value)V=f.top+t-D-z,V<t+O&&(V=t+O);else{V=f.bottom+t+z;const se=V+D,te=t+T;se>te-i&&(V=te-D-i,V<f.top+t&&(V=f.top+t))}c.value={position:"absolute",top:`${V}px`,left:`${j}px`,width:`${f.width}px`,zIndex:"9999"},a.value=!0},X=()=>{g.value=!g.value,g.value&&(a.value=!1,le(()=>{v()}))};function I(){g.value&&(g.value=!1,p(I))}F(g,f=>{f&&$(I)});const J=f=>{const T=f===null?null:f;m.value!==T&&(m.value=T),w("change",m.value),I()};return re(()=>{p(I)}),d({closeDropdown:I}),(f,T)=>{var z;const D=ve("font-awesome-icon");return r(),u("div",{class:q(["w-full flex flex-col gap-2 relative",{"opacity-100 pointer-events-none":y.disabled}])},[y.labelShow?(r(),u("label",{key:0,class:q(["text-sm font-medium text-neutral-800 dark:text-neutral-200",[!y.labelShow&&"sr-only"]])},o(y.label),3)):P("",!0),e("div",{class:"relative w-full",ref_key:"controlWrapperRef",ref:C,onClick:T[1]||(T[1]=ue(()=>{},["stop"]))},[e("button",{disabled:y.disabled,onClick:X,onKeydown:ce(X,["enter"]),onBlur:T[0]||(T[0]=O=>f.$emit("blur")),class:q(["relative w-full h-[44px] px-2.5 pr-[35px] border border-neutral-300 rounded-md text-sm text-left cursor-pointer bg-white transition-all overflow-hidden text-ellipsis whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-blue-400/40 dark:bg-neutral-800 dark:border-neutral-600 dark:text-neutral-100",[m.value!==null?"text-neutral-900 dark:text-neutral-100 font-medium":"text-neutral-400 dark:text-neutral-500",y.disabled&&"bg-neutral-50 dark:bg-neutral-900/50 cursor-not-allowed text-neutral-400 dark:text-neutral-600"]]),type:"button"},[y.type==="unit"&&m.value!==null&&m.value!==""?(r(),u(L,{key:0},[e("span",Te,o(B.value),1),e("span",Re,o((z=M.value)==null?void 0:z.unit),1)],64)):(r(),u(L,{key:1},[N(o(B.value),1)],64)),E(D,{icon:g.value?"fas fa-chevron-up":"fas fa-chevron-down",class:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 pointer-events-none"},null,8,["icon"])],42,Be),(r(),me(xe,{to:"#dropdown-portal"},[E(pe,{name:"dropdown",onBeforeEnter:v,onAfterEnter:v},{default:H(()=>[b(e("div",{ref_key:"dropdownRef",ref:k,class:q(["fixed mt-1 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-lg overflow-y-auto max-h-[240px] z-[2000] transition-opacity duration-200",[U.value?"origin-bottom":"origin-top",!a.value&&"opacity-0"]]),style:be({...c.value,visibility:a.value?"visible":"hidden"})},[e("ul",Oe,[(r(!0),u(L,null,A(y.options,(O,i)=>(r(),u("li",{key:O.value||i,class:q(["flex items-center w-full cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-700 transition-colors",[String(O.value)===String(m.value)?"bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 font-medium":"text-neutral-700 dark:text-neutral-300"]]),onClick:t=>J(O.value),ref_for:!0,ref:t=>{String(O.value)===String(m.value)&&(S.value=t)}},[e("span",De,[y.type==="unit"?(r(),u(L,{key:0},[e("span",Me,o(O.label),1),e("span",Ne,o(O.unit),1)],64)):(r(),u(L,{key:1},[N(o(O.label),1)],64))])],10,Pe))),128))])],6),[[_e,g.value]])]),_:1})]))],512)],2)}}}),ee=fe(Le,[["__scopeId","data-v-52a42b46"]]),ze=[{value:"event",label:"admin.event.category.event"},{value:"session",label:"admin.event.category.session"},{value:"cruising",label:"admin.event.category.cruising"},{value:"meetup",label:"admin.event.category.meetup"},{value:"competition",label:"admin.event.category.competition"},{value:"etc",label:"admin.event.category.etc"}],Ie=[{value:"male",label:"admin.event.optionmodal.gender.male"},{value:"female",label:"admin.event.optionmodal.gender.female"},{value:"mixed",label:"admin.event.optionmodal.gender.mixed"}],qe=[{value:"single",label:"admin.event.optionmodal.round.single"},{value:"tournament",label:"admin.event.optionmodal.round.tournament"},{value:"etc",label:"admin.event.optionmodal.round.etc"}],je={class:"space-y-4 text-left p-6"},He={class:"text-sm text-neutral-700 dark:text-neutral-200"},Ae=["value"],Ge={class:"text-sm text-neutral-700 dark:text-neutral-200"},Ke=["placeholder"],Ye={class:"text-sm text-neutral-700 dark:text-neutral-200"},Fe=["placeholder"],Xe={class:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},We=G({__name:"LinkModal",setup(y,{expose:d}){const{t:s}=W(),x=R(()=>[{value:"homepage",label:s("admin.event.linkmodal.type.homepage")},{value:"ticket",label:s("admin.event.linkmodal.type.ticket")},{value:"instagram",label:s("admin.event.linkmodal.type.instagram")},{value:"youtube",label:s("admin.event.linkmodal.type.youtube")},{value:"kakaotalk",label:s("admin.event.linkmodal.type.kakaotalk")},{value:"facebook",label:s("admin.event.linkmodal.type.facebook")},{value:"x",label:s("admin.event.linkmodal.type.x")},{value:"tiktok",label:s("admin.event.linkmodal.type.tiktok")},{value:"rednote",label:s("admin.event.linkmodal.type.rednote")},{value:"contact",label:s("admin.event.linkmodal.type.contact")},{value:"map",label:s("admin.event.linkmodal.type.map")},{value:"email",label:s("admin.event.linkmodal.type.email")},{value:"etc",label:s("admin.event.linkmodal.type.etc")}]),w=_("homepage"),$=_(""),p=_(""),m=R(()=>({type:w.value,title:$.value.trim()||null,url:p.value.trim()})),U=R(()=>s(`admin.event.linkmodal.urlPlaceholder.${w.value}`,s("admin.event.linkmodal.urlPlaceholder.default"))),g=R(()=>s(`admin.event.linkmodal.urlHint.${w.value}`,s("admin.event.linkmodal.urlHint.default")));function C(){if(!m.value.url)throw new Error(s("admin.event.linkmodal.validate.urlRequired"));const k=m.value.url;switch(m.value.type){case"email":if(!/^mailto:/i.test(k))throw new Error(s("admin.event.linkmodal.validate.urlProtocol.email"));break;case"contact":if(!/^tel:/i.test(k))throw new Error(s("admin.event.linkmodal.validate.urlProtocol.contact"));break;default:if(!/^https?:\/\//i.test(k))throw new Error(s("admin.event.linkmodal.validate.urlProtocol.default"))}return!0}return d({getPayload(){return C(),m.value}}),(k,S)=>(r(),u("div",je,[e("div",null,[e("label",He,o(l(s)("admin.event.linkmodal.typeLabel")),1),b(e("select",{"onUpdate:modelValue":S[0]||(S[0]=a=>w.value=a),class:"input mt-1"},[(r(!0),u(L,null,A(x.value,a=>(r(),u("option",{key:a.value,value:a.value},o(a.label),9,Ae))),128))],512),[[he,w.value]])]),e("div",null,[e("label",Ge,o(l(s)("admin.event.linkmodal.titleLabel")),1),b(e("input",{"onUpdate:modelValue":S[1]||(S[1]=a=>$.value=a),class:"input mt-1",placeholder:l(s)("admin.event.linkmodal.titlePlaceholder")},null,8,Ke),[[h,$.value]])]),e("div",null,[e("label",Ye,o(l(s)("admin.event.linkmodal.urlLabel")),1),b(e("input",{"onUpdate:modelValue":S[2]||(S[2]=a=>p.value=a),class:"input mt-1",placeholder:U.value},null,8,Fe),[[h,p.value]]),e("p",Xe,o(g.value),1)])]))}}),Je={class:"space-y-4 text-left p-6"},Qe={class:"grid grid-cols-2 gap-3"},Ze={class:"text-sm text-neutral-700 dark:text-neutral-200"},et=["placeholder"],tt={class:"text-sm text-neutral-700 dark:text-neutral-200"},lt=["placeholder"],at={class:"text-sm text-neutral-700 dark:text-neutral-200"},nt=["placeholder"],ot={class:"grid grid-cols-2 gap-3"},st={class:"flex items-center gap-3"},dt={for:"music",class:"text-sm text-neutral-700 dark:text-neutral-200"},it={class:"flex items-center gap-3"},rt={for:"countable",class:"text-sm text-neutral-700 dark:text-neutral-200"},ut={class:"text-sm text-neutral-700 dark:text-neutral-200"},mt=G({__name:"OptionModal",setup(y,{expose:d}){const{t:s}=W(),x=_(""),w=_(""),$=_(null),p=_(null),m=_(null),U=_(!1),g=_(!0),C=_(0),k=R(()=>Ie.map(B=>({...B,label:s(B.label)}))),S=R(()=>qe.map(B=>({...B,label:s(B.label)}))),a=R(()=>({name:x.value.trim(),code:w.value.trim(),option_category:$.value,gender_type:p.value,round_type:m.value,music_request_use:U.value,countable:g.value,sort_order:C.value??0}));function M(){if(!a.value.name)throw new Error(s("admin.event.optionmodal.validate.nameRequired"));if(!a.value.code)throw new Error(s("admin.event.optionmodal.validate.codeRequired"));return!0}return d({getPayload(){return M(),a.value}}),(B,c)=>(r(),u("div",Je,[e("div",Qe,[e("div",null,[e("label",Ze,o(l(s)("admin.event.optionmodal.label.name")),1),b(e("input",{"onUpdate:modelValue":c[0]||(c[0]=v=>x.value=v),class:"input mt-1",placeholder:l(s)("admin.event.optionmodal.placeholder.name")},null,8,et),[[h,x.value]])]),e("div",null,[e("label",tt,o(l(s)("admin.event.optionmodal.label.code")),1),b(e("input",{"onUpdate:modelValue":c[1]||(c[1]=v=>w.value=v),class:"input mt-1",placeholder:l(s)("admin.event.optionmodal.placeholder.code")},null,8,lt),[[h,w.value]])])]),e("div",null,[e("label",at,o(l(s)("admin.event.optionmodal.label.category")),1),b(e("input",{"onUpdate:modelValue":c[2]||(c[2]=v=>$.value=v),class:"input mt-1",placeholder:l(s)("admin.event.optionmodal.placeholder.category")},null,8,nt),[[h,$.value]])]),e("div",ot,[e("div",null,[E(ee,{modelValue:p.value,"onUpdate:modelValue":c[3]||(c[3]=v=>p.value=v),label:l(s)("admin.event.optionmodal.label.gender"),options:k.value,placeholder:l(s)("admin.event.optionmodal.select.none")},null,8,["modelValue","label","options","placeholder"])]),e("div",null,[E(ee,{modelValue:m.value,"onUpdate:modelValue":c[4]||(c[4]=v=>m.value=v),label:l(s)("admin.event.optionmodal.label.round"),options:S.value,placeholder:l(s)("admin.event.optionmodal.select.none")},null,8,["modelValue","label","options","placeholder"])])]),e("div",st,[b(e("input",{id:"music",type:"checkbox","onUpdate:modelValue":c[5]||(c[5]=v=>U.value=v)},null,512),[[ae,U.value]]),e("label",dt,o(l(s)("admin.event.optionmodal.label.music")),1)]),e("div",it,[b(e("input",{id:"countable",type:"checkbox","onUpdate:modelValue":c[6]||(c[6]=v=>g.value=v)},null,512),[[ae,g.value]]),e("label",rt,o(l(s)("admin.event.optionmodal.label.countable")),1)]),e("div",null,[e("label",ut,o(l(s)("admin.event.optionmodal.label.sortOrder")),1),b(e("input",{type:"number","onUpdate:modelValue":c[7]||(c[7]=v=>C.value=v),class:"input mt-1"},null,512),[[h,C.value,void 0,{number:!0}]])])]))}}),ct={class:"space-y-4 text-left p-6"},vt={class:"grid grid-cols-3 gap-3"},pt={class:"text-sm text-neutral-700 dark:text-neutral-200"},_t={class:"text-sm text-neutral-700 dark:text-neutral-200"},bt={class:"text-sm text-neutral-700 dark:text-neutral-200"},xt={class:"text-sm text-neutral-700 dark:text-neutral-200"},ft=["placeholder"],ht={class:"rounded-lg border border-neutral-200 dark:border-neutral-700 p-3"},gt={class:"text-sm text-neutral-700 dark:text-neutral-200 cursor-pointer"},kt={class:"mt-3 space-y-3"},yt={class:"text-xs text-neutral-600 dark:text-neutral-300"},wt={class:"text-xs text-neutral-600 dark:text-neutral-300"},Vt={class:"text-xs text-neutral-600 dark:text-neutral-300"},$t={class:"text-xs text-neutral-600 dark:text-neutral-300"},Ct={class:"text-sm text-neutral-700 dark:text-neutral-200"},Et=G({__name:"ScheduleModal",setup(y,{expose:d}){const{t:s}=W(),x=_(""),w=_(""),$=_(""),p=_(""),m=_(""),U=_(""),g=_(""),C=_(""),k=_(0),S=B=>B?`${B}:00`:"",a=R(()=>({schedule_date:x.value,start_time:S(w.value),end_time:S($.value),content_ko:p.value.trim(),content_en:m.value.trim()||null,content_zh:U.value.trim()||null,content_zh_tw:g.value.trim()||null,content_ja:C.value.trim()||null,sort_order:k.value??0}));function M(){if(!a.value.schedule_date)throw new Error(s("admin.event.schedulemodal.validate.dateRequired"));if(!w.value)throw new Error(s("admin.event.schedulemodal.validate.startRequired"));if(!$.value)throw new Error(s("admin.event.schedulemodal.validate.endRequired"));if(!a.value.content_ko)throw new Error(s("admin.event.schedulemodal.validate.contentKoRequired"));if(a.value.end_time<=a.value.start_time)throw new Error(s("admin.event.schedulemodal.validate.timeInvalid"));return!0}return d({getPayload(){return M(),a.value}}),(B,c)=>(r(),u("div",ct,[e("div",vt,[e("div",null,[e("label",pt,o(l(s)("admin.event.schedulemodal.label.date")),1),b(e("input",{type:"date","onUpdate:modelValue":c[0]||(c[0]=v=>x.value=v),class:"input mt-1"},null,512),[[h,x.value]])]),e("div",null,[e("label",_t,o(l(s)("admin.event.schedulemodal.label.start")),1),b(e("input",{type:"time","onUpdate:modelValue":c[1]||(c[1]=v=>w.value=v),class:"input mt-1"},null,512),[[h,w.value]])]),e("div",null,[e("label",bt,o(l(s)("admin.event.schedulemodal.label.end")),1),b(e("input",{type:"time","onUpdate:modelValue":c[2]||(c[2]=v=>$.value=v),class:"input mt-1"},null,512),[[h,$.value]])])]),e("div",null,[e("label",xt,o(l(s)("admin.event.schedulemodal.label.contentKo"))+" * ",1),b(e("textarea",{"onUpdate:modelValue":c[3]||(c[3]=v=>p.value=v),class:"input mt-1",rows:"3",placeholder:l(s)("admin.event.schedulemodal.placeholder.contentKo")},null,8,ft),[[h,p.value]])]),e("details",ht,[e("summary",gt,o(l(s)("admin.event.schedulemodal.label.contentMulti")),1),e("div",kt,[e("div",null,[e("label",yt,o(l(s)("admin.event.schedulemodal.lang.en")),1),b(e("input",{"onUpdate:modelValue":c[4]||(c[4]=v=>m.value=v),class:"input mt-1"},null,512),[[h,m.value]])]),e("div",null,[e("label",wt,o(l(s)("admin.event.schedulemodal.lang.zh")),1),b(e("input",{"onUpdate:modelValue":c[5]||(c[5]=v=>U.value=v),class:"input mt-1"},null,512),[[h,U.value]])]),e("div",null,[e("label",Vt,o(l(s)("admin.event.schedulemodal.lang.zhTw")),1),b(e("input",{"onUpdate:modelValue":c[6]||(c[6]=v=>g.value=v),class:"input mt-1"},null,512),[[h,g.value]])]),e("div",null,[e("label",$t,o(l(s)("admin.event.schedulemodal.lang.ja")),1),b(e("input",{"onUpdate:modelValue":c[7]||(c[7]=v=>C.value=v),class:"input mt-1"},null,512),[[h,C.value]])])])]),e("div",null,[e("label",Ct,o(l(s)("admin.event.schedulemodal.label.sortOrder")),1),b(e("input",{type:"number","onUpdate:modelValue":c[8]||(c[8]=v=>k.value=v),class:"input mt-1"},null,512),[[h,k.value,void 0,{number:!0}]])])]))}}),Ut={class:"p-6 bg-neutral-50 dark:bg-neutral-900 min-h-[calc(100vh-54px)]"},St={class:"max-w-[1024px] mx-auto space-y-10"},Bt={class:"flex items-center justify-between"},Tt={class:"text-xl font-semibold text-neutral-800 dark:text-neutral-100"},Rt={key:0,class:"text-sm text-red-500"},Ot={class:"space-y-6"},Pt={key:0,class:"text-xs text-red-500"},Dt={class:"text-xs text-red-400 flex items-start gap-1"},Mt={class:"space-y-2 flex mb-2"},Nt={class:"mb-0 text-sm font-medium text-neutral-800 dark:text-neutral-200"},Lt={key:0,class:"mb-0 text-sm font-medium text-neutral-800 dark:text-neutral-200"},zt={class:"pl-2"},It={class:"grid grid-cols-2 gap-4"},qt=["placeholder"],jt=["placeholder"],Ht={class:"space-y-4"},At={key:0,class:"pl-4 space-y-3"},Gt={class:"text-sm font-medium"},Kt={class:"grid grid-cols-2 gap-4 mt-[10px]"},Yt={class:"text-sm font-medium"},Ft={class:"mt-[5px] text-xs text-red-400 flex items-start gap-1"},Xt=["placeholder"],Wt=["placeholder"],Jt={class:"rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-4 space-y-3"},Qt={class:"flex items-center justify-between"},Zt={class:"sound_only"},el={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400"},tl={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400"},ll={key:2,class:"divide-y divide-neutral-200 dark:divide-neutral-700"},al={class:"min-w-0"},nl={class:"text-sm font-medium text-neutral-800 dark:text-neutral-100"},ol={key:0,class:"text-neutral-500 dark:text-neutral-400"},sl=["href"],dl=["onClick"],il={class:"rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-4 space-y-3"},rl={class:"flex items-center justify-between gap-3"},ul={class:"sound_only"},ml={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400"},cl={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400"},vl={key:2,class:"divide-y divide-neutral-200 dark:divide-neutral-700"},pl={class:"min-w-0"},_l={class:"text-sm font-medium text-neutral-800 dark:text-neutral-100"},bl={class:"text-neutral-500 dark:text-neutral-400"},xl={class:"text-xs text-neutral-500 dark:text-neutral-400"},fl={key:0},hl={key:1},gl={key:2},kl={key:3},yl=["onClick"],wl={class:"rounded-xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-800 p-4 space-y-3"},Vl={class:"flex items-center justify-between"},$l={class:"sound_only"},Cl={key:0,class:"text-sm text-neutral-500 dark:text-neutral-400"},El={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400"},Ul={key:2,class:"space-y-4"},Sl={class:"px-3 py-2 text-sm font-semibold text-neutral-800 dark:text-neutral-100 bg-neutral-50 dark:bg-neutral-900/40"},Bl={class:"divide-y divide-neutral-200 dark:divide-neutral-700"},Tl={class:"min-w-0"},Rl={class:"text-xs text-neutral-500 dark:text-neutral-400"},Ol={class:"text-sm text-neutral-800 dark:text-neutral-100 whitespace-pre-line"},Pl={key:0,class:"text-xs text-neutral-500 dark:text-neutral-400 truncate"},Dl=["onClick"],Ml={class:"flex justify-end gap-2"},zl=G({__name:"EditView",setup(y){const{t:d,locale:s}=W(),x=ke(),w=Ve(),{showModal:$}=ge(),p=$e(),m=R(()=>{const i=x.params.eventId;return typeof i=="string"&&i?i:null}),U=_(null),g=_(!1),C=_(!1),k=_(null),S=R(()=>ze.map(i=>({...i,label:d(i.label)}))),a=_({name:"",name_en:null,country_code:null,event_cate:null,start_date:null,end_date:null,open:!1,status:"draft",content:null,payinfo:null,registration_use:!0,registration_start_at:null,registration_end_at:null,multiple_registration_use:!1,edit_registration_use:!1,open_registration_list:!1,maximum_registration:null,option_limit:null}),M=R(()=>{var i;return!!((i=a.value.name_en)!=null&&i.length)}),B=R(()=>{if(!a.value.country_code)return"";const i=ye(a.value.country_code,s.value);return`${a.value.country_code} ${i}`}),c=R(()=>{const i=[];let t=null;for(const n of p.schedules)(!t||t.date!==n.schedule_date)&&(t={date:n.schedule_date,items:[]},i.push(t)),t.items.push(n);return i});async function v(i){g.value=!0,k.value=null;try{await p.fetchEventDetail(i);const t=p.currentEvent;a.value={name:t.name,name_en:t.name_en,country_code:t.country_code,event_cate:t.event_cate,start_date:t.start_date,end_date:t.end_date,open:t.open,status:t.status,content:t.content,payinfo:t.payinfo,registration_use:t.registration_use,registration_start_at:t.registration_start_at,registration_end_at:t.registration_end_at,multiple_registration_use:t.multiple_registration_use,edit_registration_use:t.edit_registration_use,open_registration_list:t.open_registration_list,maximum_registration:t.maximum_registration,option_limit:t.option_limit}}catch(t){k.value=(t==null?void 0:t.message)??d("admin.event.alert.loadError")}finally{g.value=!1}}F(m,async i=>{if(!i){w.replace({name:"admin-event-list"});return}await v(i)},{immediate:!0});const X=()=>{m.value&&$({title:d("admin.event.modal.linkTitle"),type:"confirm",contentComponent:Q(We),closeBtn:!0,confirmCallback:i=>p.addLink(m.value,i).then(()=>!0).catch(()=>!1)})},I=()=>{m.value&&$({title:d("admin.event.modal.optionTitle"),type:"bottom",contentComponent:Q(mt),closeBtn:!0,confirmCallback:i=>p.addOption(m.value,i).then(()=>!0).catch(()=>!1)})},J=()=>{m.value&&$({title:d("admin.event.modal.scheduleTitle"),type:"bottom",contentComponent:Q(Et),closeBtn:!0,confirmCallback:i=>p.addSchedule(m.value,i).then(()=>!0).catch(()=>!1)})},f=i=>confirm(d("admin.event.confirm.delete"))&&p.deleteLink(i),T=i=>confirm(d("admin.event.confirm.delete"))&&p.deleteOption(i),D=i=>confirm(d("admin.event.confirm.delete"))&&p.deleteSchedule(i),z=async()=>{var i,t;if(m.value){C.value=!0,k.value=null;try{await p.updateEvent(m.value,a.value),alert(d("admin.event.edit.saveSuccess"))}catch(n){if(((t=(i=n==null?void 0:n.response)==null?void 0:i.data)==null?void 0:t.code)==="23505"){const j=d("admin.event.validate.nameEnDuplicate");k.value=j,U.value=j;return}k.value=(n==null?void 0:n.message)??d("admin.event.alert.saveError")}finally{C.value=!1}}},O=async i=>{if(m.value){if(i&&!M.value){alert(d("admin.event.edit.needNameEn"));return}try{await p.updateEvent(m.value,{open:i,status:i?"open":"draft"}),a.value.open=i,a.value.status=i?"open":"draft"}catch(t){if((t==null?void 0:t.code)==="23505"){alert(d("admin.event.validate.nameEnDuplicate"));return}alert(d("admin.event.alert.saveError"))}}};return(i,t)=>(r(),u("main",Ut,[e("div",St,[e("div",Bt,[e("h1",Tt,o(l(d)("admin.event.edit.title")),1),E(Y,{"model-value":a.value.open,disabled:!M.value,label:a.value.status==="open"?l(d)("admin.event.status.open"):l(d)("admin.event.status.closed"),"onUpdate:modelValue":O},null,8,["model-value","disabled","label"])]),k.value?(r(),u("p",Rt,o(k.value),1)):P("",!0),e("section",Ot,[E(ne,{modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value.name=n),size:"medium",type:"text","input-id":"inputName","input-name":"inputName",label:l(d)("admin.event.form.name"),placeholder:l(d)("admin.event.form.name")},null,8,["modelValue","label","placeholder"]),E(ne,{modelValue:a.value.name_en,"onUpdate:modelValue":t[1]||(t[1]=n=>a.value.name_en=n),size:"medium",type:"text","input-id":"inputNameEn","input-name":"inputNameEn",requiredText:l(d)("admin.event.form.nameEnHint"),label:l(d)("admin.event.form.nameEn"),placeholder:l(d)("admin.event.form.nameEn")},null,8,["modelValue","requiredText","label","placeholder"]),U.value?(r(),u("p",Pt,o(U.value),1)):P("",!0),e("p",Dt,[t[18]||(t[18]=e("span",null,"※",-1)),e("span",null,o(l(d)("admin.event.form.nameEnHint")),1)]),e("div",Mt,[e("p",Nt,o(l(d)("common.country.searchPlaceholder")),1),a.value.country_code?(r(),u("p",Lt,[e("span",zt,"["+o(B.value)+"]",1)])):P("",!0)]),E(we,{modelValue:a.value.country_code,"onUpdate:modelValue":t[2]||(t[2]=n=>a.value.country_code=n),"label-show":!1},null,8,["modelValue"]),E(ee,{modelValue:a.value.event_cate,"onUpdate:modelValue":t[3]||(t[3]=n=>a.value.event_cate=n),label:l(d)("admin.event.form.category"),options:S.value,placeholder:l(d)("admin.event.form.category")},null,8,["modelValue","label","options","placeholder"]),e("div",It,[b(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=n=>a.value.start_date=n),class:"input"},null,512),[[h,a.value.start_date]]),b(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=n=>a.value.end_date=n),class:"input"},null,512),[[h,a.value.end_date]])]),b(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=n=>a.value.content=n),rows:"5",class:"input",placeholder:l(d)("admin.event.form.content")},null,8,qt),[[h,a.value.content]]),b(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=n=>a.value.payinfo=n),rows:"4",class:"input",placeholder:l(d)("admin.event.form.payinfo")},null,8,jt),[[h,a.value.payinfo]])]),e("section",Ht,[E(Y,{modelValue:a.value.registration_use,"onUpdate:modelValue":t[8]||(t[8]=n=>a.value.registration_use=n),label:l(d)("admin.event.form.registrationUse")},null,8,["modelValue","label"]),a.value.registration_use?(r(),u("div",At,[e("label",Gt,o(l(d)("admin.event.form.registrationPeriod")),1),e("div",Kt,[b(e("input",{type:"datetime-local","onUpdate:modelValue":t[9]||(t[9]=n=>a.value.registration_start_at=n),class:"input"},null,512),[[h,a.value.registration_start_at]]),b(e("input",{type:"datetime-local","onUpdate:modelValue":t[10]||(t[10]=n=>a.value.registration_end_at=n),class:"input"},null,512),[[h,a.value.registration_end_at]])]),e("label",Yt,o(l(d)("admin.event.form.registrationCancellationPeriod")),1),b(e("input",{type:"datetime-local","onUpdate:modelValue":t[11]||(t[11]=n=>a.value.registration_end_at=n),class:"input mt-[5px]"},null,512),[[h,a.value.registration_end_at]]),e("p",Ft,[t[19]||(t[19]=e("span",null,"※",-1)),e("span",null,[e("span",null,o(l(d)("admin.event.form.registrationCancellationGuide")),1)])]),E(Y,{modelValue:a.value.multiple_registration_use,"onUpdate:modelValue":t[12]||(t[12]=n=>a.value.multiple_registration_use=n),label:l(d)("admin.event.form.multipleRegistration")},null,8,["modelValue","label"]),E(Y,{modelValue:a.value.edit_registration_use,"onUpdate:modelValue":t[13]||(t[13]=n=>a.value.edit_registration_use=n),label:l(d)("admin.event.form.editRegistration")},null,8,["modelValue","label"]),E(Y,{modelValue:a.value.open_registration_list,"onUpdate:modelValue":t[14]||(t[14]=n=>a.value.open_registration_list=n),label:l(d)("admin.event.form.openRegistrationList")},null,8,["modelValue","label"]),b(e("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=n=>a.value.maximum_registration=n),class:"input",placeholder:l(d)("admin.event.form.maxRegistration")},null,8,Xt),[[h,a.value.maximum_registration,void 0,{number:!0}]]),b(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=n=>a.value.option_limit=n),class:"input",placeholder:l(d)("admin.event.form.optionLimit")},null,8,Wt),[[h,a.value.option_limit,void 0,{number:!0}]])])):P("",!0)]),e("section",Jt,[e("div",Qt,[e("h2",Zt,o(l(d)("admin.event.modal.link")),1),E(K,{size:"small",onClick:X},{default:H(()=>[N(o(l(d)("admin.event.modal.linkTitle")),1)]),_:1})]),l(p).linksLoading?(r(),u("div",el,o(l(d)("admin.event.link.loading")),1)):l(p).links.length===0?(r(),u("div",tl,o(i.$t("admin.event.link.empty")),1)):(r(),u("ul",ll,[(r(!0),u(L,null,A(l(p).links,n=>(r(),u("li",{key:n.id,class:"py-3 flex items-center justify-between gap-3"},[e("div",al,[e("div",nl,[N(o(n.type)+" ",1),n.title?(r(),u("span",ol,"· "+o(n.title),1)):P("",!0)]),e("a",{class:"text-xs text-blue-600 dark:text-blue-400 truncate block",href:n.link,target:"_blank",rel:"noopener"},o(n.link),9,sl)]),e("button",{class:"text-xs px-2 py-1 rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-700",onClick:V=>f(n.id)},o(l(d)("common.button.delete")),9,dl)]))),128))]))]),e("section",il,[e("div",rl,[e("h2",ul,o(l(d)("admin.event.option.title")),1),E(K,{size:"small",class:"shrink-0",onClick:I},{default:H(()=>[N(o(l(d)("admin.event.modal.optionTitle")),1)]),_:1})]),l(p).optionsLoading?(r(),u("div",ml,o(l(d)("admin.event.option.loading")),1)):l(p).options.length===0?(r(),u("div",cl,o(l(d)("admin.event.option.empty")),1)):(r(),u("ul",vl,[(r(!0),u(L,null,A(l(p).options,n=>(r(),u("li",{key:n.id,class:"py-3 flex items-center justify-between gap-3"},[e("div",pl,[e("div",_l,[N(o(n.name)+" ",1),e("span",bl,"· "+o(n.code),1)]),e("div",xl,[N(o(n.option_category??"분류없음")+" ",1),n.gender_type?(r(),u("span",fl," · "+o(n.gender_type),1)):P("",!0),n.round_type?(r(),u("span",hl," · "+o(n.round_type),1)):P("",!0),n.music_request_use?(r(),u("span",gl," · "+o(l(d)("common.button.delete")),1)):P("",!0),n.countable===!1?(r(),u("span",kl," · "+o(l(d)("common.button.delete")),1)):P("",!0)])]),e("button",{class:"text-xs px-2 py-1 rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-700",onClick:V=>T(n.id)},o(l(d)("common.button.delete")),9,yl)]))),128))]))]),e("section",wl,[e("div",Vl,[e("h2",$l,o(l(d)("admin.event.schedule.title")),1),E(K,{size:"small",onClick:J},{default:H(()=>[N(o(l(d)("admin.event.modal.scheduleTitle")),1)]),_:1})]),l(p).schedulesLoading?(r(),u("div",Cl,o(i.$t("admin.event.listLoading")),1)):l(p).schedules.length===0?(r(),u("div",El,o(i.$t("admin.event.empty")),1)):(r(),u("div",Ul,[(r(!0),u(L,null,A(c.value,n=>(r(),u("div",{key:n.date,class:"rounded-lg border border-neutral-200 dark:border-neutral-700"},[e("div",Sl,o(n.date),1),e("ul",Bl,[(r(!0),u(L,null,A(n.items,V=>(r(),u("li",{key:V.id,class:"px-3 py-3 flex items-start justify-between gap-3"},[e("div",Tl,[e("div",Rl,o(V.start_time)+" ~ "+o(V.end_time),1),e("div",Ol,o(V.content_ko),1),V.content_en?(r(),u("div",Pl," EN: "+o(V.content_en),1)):P("",!0)]),e("button",{class:"shrink-0 text-xs px-2 py-1 rounded-md border border-neutral-300 dark:border-neutral-600 text-neutral-700 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-700",onClick:j=>D(V.id)},o(l(d)("common.button.delete")),9,Dl)]))),128))])]))),128))]))]),e("div",Ml,[E(K,{type:"default",onClick:t[17]||(t[17]=n=>l(w).back())},{default:H(()=>[N(o(l(d)("common.button.back")),1)]),_:1}),E(K,{type:"primary",disabled:C.value,onClick:z},{default:H(()=>[N(o(l(d)("common.button.save")),1)]),_:1},8,["disabled"])])])]))}});export{zl as default};
