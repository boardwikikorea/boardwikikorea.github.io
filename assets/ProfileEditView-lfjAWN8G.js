import{d as C,c as B,n as S,b as t,a as A,t as w,o as N,u as R,q,r,g as z,x as E,f as F,m as n,e as u,A as M,i as D,D as I,G as j,z as G}from"./index-CkkheZHq.js";import{f as T,u as H}from"./profile-Dzz_JaQb.js";import{_ as J}from"./SectionTitle.vue_vue_type_script_setup_true_lang-CULmoiOk.js";import{_ as x,B as K}from"./BaseInputAutoCountry-Dp5nBGJQ.js";import{_ as L}from"./BaseCountryPhoneInput.vue_vue_type_script_setup_true_lang-BwERt8k2.js";const O={class:"relative flex items-center justify-center shrink-0 w-6 h-6"},Q=["name","value","checked","disabled"],W={key:0,class:"absolute w-3 h-3 bg-[#F66119] rounded-full pointer-events-none"},X={class:"text-[20px] font-medium text-black dark:text-white leading-none"},k=C({__name:"BaseRadio",props:{modelValue:{type:[String,Number,Boolean,null]},value:{type:[String,Number,Boolean,null]},label:{},name:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(s,{emit:l}){const v=s,_=l,i=()=>{v.disabled||_("update:modelValue",v.value)};return(p,b)=>(N(),B("label",{class:S(["flex items-center gap-3 cursor-pointer group",{"opacity-50 cursor-not-allowed":s.disabled}])},[t("div",O,[t("input",{type:"radio",name:s.name,value:s.value,checked:s.modelValue===s.value,disabled:s.disabled,onChange:i,class:"appearance-none w-full h-full border-2 border-black dark:border-white rounded-full checked:border-[#F66119] transition-all cursor-pointer"},null,40,Q),s.modelValue===s.value?(N(),B("div",W)):A("",!0)]),t("span",X,w(s.label),1)],2))}}),Y={class:"p-6"},Z={class:"max-w-[600px] mx-auto mt-10 space-y-6"},ee={class:"block text-sm font-medium mb-3"},le={class:"flex gap-6"},ae={class:"block text-sm font-medium mb-1"},oe={class:"flex gap-4"},ue={class:"w-[100px]"},te={class:"flex-1"},ne={class:"block text-sm font-medium mb-3"},se={class:"flex gap-6"},fe=C({__name:"ProfileEditView",setup(s){const{t:l}=R(),v=j(),_=G(),i=q(),p=r(!1),b=r(""),V=r(""),g=r(""),m=r(null),c=r(null),d=r(null),y=r(null),f=r(""),h=r(""),$=r(null),U=z(()=>!(!V.value.trim()||!g.value.trim()||!c.value||y.value&&!f.value||!y.value&&f.value));E(async()=>{if(!i.user)return;const o=await T(i.user.id);o&&(b.value=o.email||i.user.email||"",V.value=o.nickname,g.value=o.name,m.value=o.gender,c.value=o.nationality,d.value=o.stance,f.value=o.phone??"",h.value=o.address??"",$.value=o.address)});async function P(){if(!(!i.user||p.value||!U.value)){p.value=!0;try{const o=h.value.trim()!==""?{address:h.value,latitude:0,longitude:0}:null;await H(i.user.id,{nickname:V.value,fullName:g.value,gender:m.value,nationality:c.value,stance:d.value,contactEmail:b.value,contactPhoneCountry:y.value,contactPhone:f.value||null,region:o}),alert(l("user.profile.alert.success")),v.query.redirect&&_.push(v.query.redirect)}catch(o){console.error(o),alert(l("user.profile.alert.error"))}finally{p.value=!1}}}return F(c,o=>{y.value=o}),(o,e)=>(N(),B("div",Y,[t("div",Z,[n(J,{title:u(l)("user.profile.title.edit")},null,8,["title"]),n(x,{label:u(l)("user.profile.fields.email"),modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),readonly:""},null,8,["label","modelValue"]),n(x,{label:u(l)("user.profile.fields.nickname"),modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a)},null,8,["label","modelValue"]),n(x,{label:u(l)("user.profile.fields.fullName"),modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=a=>g.value=a)},null,8,["label","modelValue"]),t("div",null,[t("label",ee,w(u(l)("user.profile.fields.gender")),1),t("div",le,[n(k,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=a=>m.value=a),value:"male",label:u(l)("user.profile.gender.male"),name:"gender"},null,8,["modelValue","label"]),n(k,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=a=>m.value=a),value:"female",label:u(l)("user.profile.gender.female"),name:"gender"},null,8,["modelValue","label"])])]),n(K,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=a=>c.value=a),label:u(l)("user.profile.fields.nationality")},null,8,["modelValue","label"]),t("div",null,[t("label",ae,w(u(l)("user.profile.fields.contact")),1),t("div",oe,[t("div",ue,[n(L,{country:y.value},null,8,["country"])]),t("div",te,[n(x,{modelValue:f.value,"onUpdate:modelValue":e[6]||(e[6]=a=>f.value=a),placeholder:u(l)("user.profile.placeholders.phoneNumber"),type:"phone",maxlength:11},null,8,["modelValue","placeholder"])])])]),n(x,{label:u(l)("user.profile.fields.region"),placeholder:u(l)("user.profile.placeholders.region"),modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=a=>h.value=a)},null,8,["label","placeholder","modelValue"]),t("div",null,[t("label",ne,w(u(l)("user.profile.fields.stance")),1),t("div",se,[n(k,{modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=a=>d.value=a),value:null,label:u(l)("user.profile.stance.none"),name:"stance"},null,8,["modelValue","label"]),n(k,{modelValue:d.value,"onUpdate:modelValue":e[9]||(e[9]=a=>d.value=a),value:"regular",label:u(l)("user.profile.stance.regular"),name:"stance"},null,8,["modelValue","label"]),n(k,{modelValue:d.value,"onUpdate:modelValue":e[10]||(e[10]=a=>d.value=a),value:"goofy",label:u(l)("user.profile.stance.goofy"),name:"stance"},null,8,["modelValue","label"])])]),n(I,{size:"xlarge",type:"primary",loading:p.value,disabled:!U.value,onClick:P},{default:M(()=>[D(w(u(l)("user.profile.actions.save")),1)]),_:1},8,["loading","disabled"])])]))}});export{fe as default};
